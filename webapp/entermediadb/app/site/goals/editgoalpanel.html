<div id="editgoal">
#set( $categoryid = $context.getRequestParameter("categoryid"))
#set( $hitssessionid = $context.getRequestParameter("hitssessionid"))
#set( $goalfolder = $context.getRequestParameter("goalfolder"))
#if(!$goalfolder)
	#set( $goalfolder = $context.findValue("goalfolder") )
#end
#set( $searcher = $mediaarchive.getSearcher("projectgoal") )
$context.putPageValue("searcher",$searcher)
#if( $data.id )
$context.putPageValue("view", "projectgoal/edit")
<div style="float:right;margin:0px 20px 5px 0">
$pages.include("$apphome/site/goals/like.html")
</div>

#else
$context.putPageValue("view", "projectgoal/addnew")
#end

<div class="clearfix"></div>

<form name="saveproject" enctypeXX="multipart/form-data" id="saveproject" method="post" 
#if( $data.id)
	action="/$applicationid/site/goals/${goalfolder}/goalsave.html" >
#else
	action="/$applicationid/site/goals/${goalfolder}/goalsavenew.html" >
#end
#if( $caneditdata)
<input type="hidden" name="save" value="true" />
#end
<input type="hidden" name="searchtype" value="projectgoal" />
<input type="hidden" name="collectionid" value="$librarycol.id" />
<input type="hidden" name="field" value="collectionid" />
<input type="hidden" name="collectionid.value" value="$librarycol.id" />
#if( $data.id)
<input type="hidden" name="id" value="$!data.id" />
#else
<input type="hidden" name="field" value="owner" />
<input type="hidden" name="owner.value" value="$user.id" />
<input type="hidden" name="field" value="creationdate" />
<input type="hidden" name="creationdate.value" value="$storeddate" />
#end
<input type="hidden" name="categoryid" value="$!categoryid" />
<input type="hidden" name="nodeID" value="$!categoryid" />

<input type="hidden" name="hitssessionid" value="$!hitssessionid" />

#if( $caneditdata )
$pages.include("/$applicationid/components/xml/detaileditor4.html", $context)

<div class="form-group row">
    <label for="exampleTextarea" class="col-2 col-form-label">[[Project]]</label>
    <div class="col-10">
<div class="emfield-list">
	<input type="hidden" value="goaltrackercolumn" name="field">
<div id="listdetail_project" class="listdetailpicker">
	<select id="list-project" data-placeholder=" " name="goaltrackercolumn.value" class="listdropdown choose-select detail-select form-control autosubmited " listid="project" data-listid="project" data-searchtype="$searchtype" onchange="if( typeof updatelisteners == 'function' )updatelisteners('site/catalog','$searchtype','','project');">
	<option value=""></option>
	#set( $projects = $mediaarchive.query("siteproject").match("parentcollectionid",$librarycol.getId()).search())
	#foreach( $project in $projects)
		<option value="$project.getId()" #if( $data.goaltrackercolumn == $project.getId() ) selected #end>$project</option>
	#end
   </select>
		<a class="emdialog addnewitem" href="/site/app/views/settings/lists/datamanager/edit/inline.html?searchtype=project&amp;update=list-project" title="[[Add New Project]]" data-hidefooter="true">+ [[New Project]]</a>
</div>
</div>
    </div>
    </div>

#set( $fullscreen = $context.getRequestParameter("fullscreen"))
#if( $fullscreen == "true")
	<input class="btn" type="submit" value="[[Save]]"></input><br><br>
#end
#else
$pages.include("/$applicationid/components/xml/detaileditorcss.html?detailsreadonly=true", $context)
#end

</form>

<div class="clearfix"></div>
$pages.include("$apphome/site/goals/tasks.html")
</div>