#set( $collectionid = $context.getRequestParameter('collectionid'))
#set( $topicid = $context.getRequestParameter("topic"))
#set( $searcher = $mediaarchive.getSearcher("collectiveproject") )


#if($topicid)
	#set( $currenttopic = $searcher.query().match("parentcollectionid",$collectionid).exact("id",$topicid).searchOne() )
#else
	#set( $currenttopic = $searcher.query().match("parentcollectionid",$collectionid).sort("name").searchOne() )
#end


#if($currenttopic)
$context.putPageValue("currenttopic", $currenttopic)

<div class=" h-100"  style="max-height: calc(100% - 120px); width:100%;" >
<div class="row h-100" >
 <div class="col">
<div class="community-maincol h-100">
<div class="row no-gutters h-100">
	#if(!$browser.inApp())
 		<div class="col-lg-2 collaborate-sidebar">
			$pages.include("$apphome/collective/community/projectlist.html", $context)
 		</div>
 	#end 
	<div class="collaborate-channel col h-100">
	<div class="collaborate-channel-header">
		<div class="channel-name float-left">
		$currenttopic
		</div>
		<div class="channel-actions float-right">
			<a href="$apphome/collective/projects/edit.html?collectionid=$librarycol.getId()&id=${currenttopic.getId()}&collectionroot=$applink/collective/community/index.html" 
					class="emdialog" 
					title="[[Edit a Topic]]"
					data-hidefooter="true">
			<i class="fas fa-cog"></i></a></div>	
	</div>

	$pages.include("$apphome/collective/community/chatbox.html", $context)
	
	</div>
</div>	
</div>

</div>	
#if(!$browser.inApp())
 <div class="col-lg-3 ">
	<div class="collective-sidebar">
		$pages.include("$apphome/collective/channel/subscribers/index.html", $context)
	</div>
 </div>
 #end
</div>
</div>


#end

