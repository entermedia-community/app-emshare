<style>
.grid-out { padding-left:10px;}
.grid-sizer,
.grid-item { 
	width: 24.5%;   
	width: 19.48%;
	margin-bottom: 10px; 
}
</style>

$hits.size() - 300x400

#if ( $hits && $hits.size() > 0 )
<div class="grid-out">
<div class="grid">
  <!-- .grid-sizer empty element, only used for element sizing -->
  <div class="grid-sizer"></div>
	#foreach ($hit in $hits.getPageOfHits())  
		
        #set ($sourcepath = $hit.sourcepath)
        
        $context.putPageValue("hit", $hit)
        #set( $type = $mediaarchive.getMediaRenderType($hit.fileformat))
        $context.putPageValue("type", $type)
        $context.putPageValue("assetid", $hit.id)
        $context.putPageValue("count", $count )        
        $context.putPageValue("sourcepath", $hit.sourcepath )
		#set ($thumbsize = "stackedview")
		$context.putPageValue("thumbsize", $thumbsize )
  		<div class="grid-item">
			#if(!$type || $type =="audio")
	    		#set( $type = "mime" )
	    	#end
    	   $pages.include("$apphome/components/results/thumbnails/${type}.html", $context)
		</div>
	#end
</div>
</div>


<script>
var grid = $('.grid').masonry({
  	columnWidth: '.grid-sizer',
  	itemSelector: '.grid-item',
	gutter: 10
});
grid.imagesLoaded().progress( function() {
  grid.masonry('layout');
});
var msnry = grid.data('masonry');
grid.infiniteScroll({
  path: getPenPath,
  append: '.grid-item',
  outlayer: msnry,
  status: '.page-load-status',
});
function getPenPath() {
  var page = this.loadCount;
  //if ( slug ) {
    //return 'https://s.codepen.io/desandro/debug/' + slug;
  //}
	return 'stacked.html?collectionid=AWuP2JmilvMfXRR35dOC&hitssessionid=hitsassetassets%2Fcatalog&page='+page+'&oemaxlevel=1';
}
</script>

#end



