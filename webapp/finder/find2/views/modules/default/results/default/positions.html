##needs 	$hits  $moduleid

#set($reloadsearchtype = $module.id)
#set($updateurl = "true")
#set($oemaxlevel = "1")
#set($targetdiv = "resultsdiv")


#if(!$rootcategory)
#set($rootcategory = $context.getRequestParameter("rootcategory"))
#end
#if(!$categoryid)
#set($categoryid = $context.getRequestParameter("categoryid"))
#end
#if(!$entityid)
#set($entityid = $context.getRequestParameter("entityid"))
#end



#if($module.id=="asset")
		
			#if($dialogresults)
				#set($resultsPage = "${searchhome}/index.html?hitssessionid=$!hits.sessionId")
				#set($resultsPage = "$resultsPage&topmoduleid=$!topmoduleid")
				#set($resultsPage = "$resultsPage&rootcategory=$!rootcategory")
				#set($resultsPage = "$resultsPage&categoryid=$!categoryid")
				#set($resultsPage = "$resultsPage&entityid=$!entityid")
				#set($updateurl = "false")
				#set($targetdiv = "dialog$!{module.id}resultscontainer")
			#else
				#if($categoryid)
					#if(!$category)
						#set($category = $mediaarchive.getCachedData("category", $categoryid))
					#end
					#set($resultsPage = "${searchhome}/viewfiles/${categoryid}/#dash($category).html?hitssessionid=$!hits.sessionId")
					#set($oemaxlevel = "2")
				#else
					#set($resultsPage = "${searchhome}/showpage.html?hitssessionid=$!hits.sessionId")
				#end
			#end
			
			#if($collectionid)
				#set($resultsPage = "$resultsPage&collectionid=$!collectionid")
			#end
			
			#set($resultsPage = "$resultsPage&$!{hits.getSearchType()}pageposition")
		
#else

	#if(!$resultsPage)
		#set($resultsPage = "${searchhome}/search.html")
	#end
	#set($resultsPage = "$resultsPage?$!{module.id}hitssessionid=$!hits.sessionId")
	#set($resultsPage = "$resultsPage&$!{hits.getSearchType()}pageposition")
	#set($oemaxlevel = "2")
	
	#set($targetdiv = "resultsdiv")
#end


#set($totalPages = $hits.getTotalPages() )

#set($currentpage = $context.getRequestParameter("currentpagenum"))

#set( $prhits = $hits.getPositionRender() )
#ifnotnull($currentpage)
	$prhits.setPageOneBased($currentpage)
#end
##set($pos = $prhits.toPosition($prhits.getPage()))
#set($links = $prhits.links())
#set( $befores = $links.getBefore() )
#set( $afters = $links.getAfter() )

#set( $selectedpos = $prhits.toPosition($prhits.getPage()))

<li class="resultpages">
	
	
<div class="resultspositions" 
	data-url="${searchhome}/positions.html" 
	data-categoryid="$!categoryid"
	data-rootcategory="$!rootcategory"
	data-hitssessionid="$!hits.getSessionId()" 
	data-currentpagenum="$prhits.getPage()">
 
		<span>
			[[Page]]
			$selectedpos
			[[of]]
			<a class="ajax pl-1 pr-2" 
				data-targetdiv="$targetdiv" 
				data-updateurl="$!updateurl"  
				data-oemaxlevel="$oemaxlevel" 
				data-position="$selectedpos"  
				#ifnotnull($entity)
					data-entityid="${entity.id}"
					data-entitymoduleid="${entitymodule.id}"
					data-entitymoduleviewid="$!{entitymoduleviewid}" 
				#end
				href="$resultsPage=$totalPages">$totalPages</a>
		</span>
		#set($prev = $selectedpos - 1)
		<a class="ajax #if($prev <= 0) disabled #end px-2" 
			data-targetdiv="$targetdiv" 
			data-updateurl="$!updateurl"  
			data-oemaxlevel="$oemaxlevel" 
			data-position="$prev"  
			#ifnotnull($entity)
					data-entityid="${entity.id}"
					data-entitymoduleid="${entitymodule.id}"
					data-entitymoduleviewid="$!{entitymoduleviewid}"
			#end
			title="[[Previous]]"
			href="$resultsPage=$prev">
			<i class="bi bi-chevron-left"></i>
		</a>
		#set($next = $selectedpos + 1)
		<a class="ajax #if($next > $totalPages) disabled #end px-2" 
			data-targetdiv="$targetdiv" 
			data-updateurl="$!updateurl"  
			data-oemaxlevel="$oemaxlevel" 
			data-position="$next"  
			title="[[Next]]"
			#ifnotnull($entity)
					data-entityid="${entity.id}"
					data-entitymoduleid="${entitymodule.id}"
					data-entitymoduleid="${entitymodule.id}"
					data-entitymoduleviewid="$!{entitymoduleviewid}"
				#end
			href="$resultsPage=$next">
			<i class="bi bi-chevron-right"></i>
		</a>
	</div>


</li>
	
	#if($totalPages>3)
		<li class="resultsnav-jumpto">
			<div class="short-pagination currentposition${pos}">
			<input class="resultsnavselect" 
				name="$!{hits.getSearchType()}pageposition" 
				id="jumptopageresults"
				data-maxpage="$totalPages" 
				data-url="$resultsPage="
				data-updateurl="$!updateurl"
				data-targetdiv="$targetdiv"
				data-oemaxlevel="$oemaxlevel"
				placeholder= "[[Jump To]]"
			/>
			</div>
		</li>
 	#end


