#set( $moduleid = $module.id)


<div id="resultsdiv" class="tableresults resultsdiv" 
		data-hitssessionid="$!hits.getSessionId()" 
		data-componenthome="$!home$!componenthome"
		data-searchhome="$!searchhome"
		data-category="$!category.id"
		data-collectionid="$!collectionid"
		data-lightboxid="$!lightboxid"  
		data-pagenum="$!hits.getPage()" 
		data-totalpages="$!hits.getTotalPages()"
		data-module="$!module.id"
		data-section="$!content.section">
		
	#set($searcher = $searcherManager.getSearcher($catalogid, $moduleid))
	$context.putPageValue("searcher", $searcher)
	
	#set($isentity = $module.get("isentity"))
	$context.putPageValue("isentity", $isentity )
	
	
	#if (!$nodeID)
		#set($nodeID = $context.getRequestParameter("nodeID"))
		$context.putPageValue("nodeID",$nodeID)
	#end
	
	$context.putPageValue("viewid", "${moduleid}resultstable")
	$context.putPageValue("viewpath", "${moduleid}/${moduleid}resultstable")
	
	#set($resultview = $userprofile.get("${moduleid}resultview"))
	
	#if(!$resultview)
		#set($resultview = $content.get("${moduleid}resultview"))
	#end
	#if(!$resultview)
		#set($resultview = $context.getRequestParameter("resultview"))
	#end
	#if(!$resultview)
		#set($resultview = $content.resultview)
	#end
	#if(!$resultview)
		#set($resultview = $module.get("moduleresultsview"))
	#end
	#if(!$resultview)
		#set($resultview = "table")
	#end

	
	$context.putPageValue("searchtype", $moduleid)
	$context.putPageValue("resultview",$resultview)
	
	#if($module.modulerendertype)
		$context.putPageValue("modulerendertype",$module.modulerendertype)
	#else
		$context.putPageValue("modulerendertype","entity")
	#end
	
	$context.putPageValue("moduletotalhits",$moduletotalhits)


	$pages.include("${searchhome}/resultviews.html", $context)
	
		
</div>


