#if(!$module)
	#set($module = $context.getRequestParameter("module"))
#end
#if(!$module)
	#set($module = $context.getRequestParameter("moduleid"))
#end
#if(!$module)
	#set( $module = $content.module)
#end

	##fix module vs moduleid
	#if($module)
		#if($module.id)
			#set($moduleid = $module.id)
		#else
			#set($moduleid = $module)
		#end
	#end
	$context.putPageValue("moduleid", $module.id)
	
	
#set($searcher = $searcherManager.getSearcher($catalogid, $module.id))
$context.putPageValue("searcher", $searcher)

#set($isentity = $module.get("isentity"))
$context.putPageValue("isentity", $isentity )


#if (!$nodeID)
	#set($nodeID = $context.getRequestParameter("nodeID"))
	$context.putPageValue("nodeID",$nodeID)
#end

#if( !$librarycol && $category ) 
	#set( $librarycol = $mediaarchive.query("librarycollection").orgroup("rootcategory",$category.getParentCategories()).searchOne() )
#end

#ifnull($librarycol )
	#set($collectionid = $context.getRequestParameter("collectionid"))
	#if($module =="librarycollection" && $collectionid)
		#set( $librarycol = $mediaarchive.query("librarycollection").exact("id",$collectionid).searchOne() )
	#end
#end

#if( $librarycol )	
	$context.putPageValue("librarycol", $librarycol)
#end

	#set($resultview = $userprofile.get("assetresultview"))
	#ifnull($resultview)
		#set($resultview = "brickvertical")
	#end
	
	$context.putPageValue("searchtype", $module.id)
	
	$context.putPageValue("resultview",$resultview)
	
	#if($module.modulerendertype)
		$context.putPageValue("modulerendertype",$module.modulerendertype)
	#else
		$context.putPageValue("modulerendertype","entity")
	#end
	
	$context.putPageValue("moduletotalhits",$moduletotalhits)


	$pages.include("${searchhome}/resultheader.html", $context)

	$pages.include("${searchhome}/resultviews.html", $context)


