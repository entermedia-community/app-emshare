#set($searcher = $mediaarchive.getSearcher($targetmodule.id))
#set($viewid = "${targetmodule.id}addnew")
#set($view = "$targetmodule.id/$viewid")
#set ($details = $searcher.getDetailsForView($view))
{
    "name": "create_entity",
    "description": "Generates metadata for an image, including descriptions, a caption, and relevant tags.",
    "parameters": {
        "type": "object",
        "properties": {
            "metadata": {
                "type": "object",
                "properties": {
#foreach($detail in $details)
                    "$detail.id": {
                        "type": #if($detail.dataType == "string") "string" 
                                #elseif($detail.dataType == "boolean") "boolean"
                                #elseif($detail.dataType == "list") "array"
                                #else "string" #end,
                        "description": "$detail.name $!detail.note"
                        #if($detail.dataType == "list"),
                        "items": {
                            "type": "string",
                            "enum": [
#foreach($option in $mediaarchive.getList($detail.id))
                                "$option.id"#if($foreach.count < $mediaarchive.getList($detail.id).size()),#end
#end 
                            ]
                        }
                        #end
                    }#if($foreach.count < $details.size()),#end
#end
                },
                "required": [
                    #set($added = false)
                    #foreach($detail in $details)
                        #if($detail.isRequired())
                            #if($added), #end"$detail.id"
                            #set($added = true)
                        #end
                    #end
                ]
            }
        },
        "required": [
            "metadata"
        ]
    }
}
