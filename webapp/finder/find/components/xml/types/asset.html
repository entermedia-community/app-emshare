#set($idcount = $context.getRequestParameter("idcount"))
#if(!$idcount)
	#set($idcount = "")
#end

<div class="assetpicker"  id="entitypicker${detail.id}" data-detailid="${detail.id}">
	<div class="render-type-thumbnail p-1" id="${detail.id}-preview">
		#if($val && $val != "")
			#set( $foundrow = $mediaarchive.getAsset($val)  )
			#if($foundrow)
				$pages.include("$apphome/components/xml/types/assetpicker/preview.html?assetid=$val", $context)
				<div style="padding:5px 0;">
				<span id="${detail.id}-file-info" class="mr-2"></span>
				<a href="#" 
					class="removefieldassetvalue"
					title="[[Remove Selected Asset]]" 
					data-targetdivinner="${detail.id}-preview"
					data-detailid="${detail.id}"
					><i class="bi bi-x"></i> [[Remove]]</a>
				</div>
			#end
		#end
	</div>

	<input type="hidden" name="${detail.id}.value" id="${detail.id}-value" data-detailid="${detail.id}" value="$!foundrow.id"/>

	<div class="d-flex align-items-center">
		<span class="btn btn-primary btn-default btn-file">
			[[Upload]] 
			<input type="file" name="file.${detail.getId()}" id="${detail.id}-file" class="assetInput">
		</span>
		<span class="d-inline-block mx-2">
			[[or]]
		</span>
		
		##?targetdiv=${detail.id}-value&detailid=${detail.id}&categoryid=$!{defaultfolder.getId()}
		
		<a href="$siteroot$apphome/views/modules/asset/components/entities/search/searchpicker.html" 
			class="emdialog btn btn-primary"
			data-dialogid="dialogpickerassetpicker"
			data-assetclearresults="true"
			data-assetclearselections="true"
			data-width="1200"
			data-detailid = '${detail.id}'
			data-entitymodule="asset"
			data-pickertarget="entitypicker${detail.id}"
			data-pickersearchaddnew="true"
			data-hidefooter="true"
			>[[Browse]] </a>
	</div>
</div>