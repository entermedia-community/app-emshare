#set( $mediadbappid = $mediaarchive.getMediaDbId() )

#set($entityid = $context.getRequestParameter("entityid"))
#set($categoryid = $context.getRequestParameter("defaultcategoryid"))

#if( !$entity)
	#set( $entity  = $mediaarchive.getData($module.id, $entityid) )
#end

#set( $type = $mediaarchive.getMediaRenderType($asset.fileFormat))
<div class="tabheader">[[Sharing Links]]</div>
<div class="mx-3 my-4">
	<p>[[This link automatically grants users viewing access to this Entity.]]</p>
	
	<div id="embed-wrapper" class="mx-3 my-4">
		<div class="embedlink">
			#set($enttiyviews = $mediaarchive.query("view").exact("moduleid", $module.id).exact("systemdefined","false").sort("orderingUp").named("view").search($context) )
			#set( $sharelink = "$siteroot$apphome/views/modules/${module.id}/userview/${entityid}/#dash($entity).html")
			#foreach( $targetview in $enttiyviews)
				<div class="mb-3">	
				<h5>#text($targetview)</h5>
					<a href="#" 
						class="copytoclipboard btn btn-xs btn-primary"
						data-targetdiv="embedalertdialog"
						data-copytext="previewlink${targetview.id}" title="[[Copy to Clipboard]]"><i class="far fa-copy"></i> [[Copy]]</a>
						<input class="sharelink" style="position:absolute; top:-1000px;" id="previewlink${targetview.id}" 
						value="${sharelink}?entitymoduleviewid=${targetview.id}" />
						
				</div>
			#end
			
			
			
		</div>
		
		#if($module.id=="librarycollection")
			#set( $sharecollectionlink = "$!{siteroot}$!{siteid}/$!{mediadbappid}/services/module/asset/players/collections/display/$!{entityid}.html")
			<h5 class="pt-4">[[Share Collection]]</h5> 
			 
				<a href="#" 
					class="copytoclipboard btn btn-xs btn-primary"
					data-targetdiv="embedalertdialog"
					data-copytext="sharecollectionlink" title="[[Copy to Clipboard]]"><i class="far fa-copy"></i> [[Copy]]</a>
			
			
				<input class="sharelink" style="position:absolute; top:-1000px;" id="sharecollectionlink" value="$sharecollectionlink " />
			
			
			#end
</div>



</div>
