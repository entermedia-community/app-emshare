

#if( $hits.getSearchQuery().hasMainInput())
	$pages.include("$componenthome/quicksearch/suggestions.html",$context)
#end

<div id="modulesearchresultsdiv" data-moduleid="$!module.id" >
	#set( $favorites = $userprofile.get("favorites_"+$module.id))
$context.putPageValue("favorites", $favorites)

#if (!$rendertype)
	#set($rendertype = $module.modulerendertype)
	#if (!$rendertype)
		#set($rendertype = "entity")
	#end
#end
$context.putPageValue("rendertype", $rendertype)
$context.putPageValue("rendermoduleid", $module.id)


$pages.include("$apphome/views/modules/$module.id/resultsactions.html",$context)

#set($currentpage = $context.getRequestParameter("currentpagenum"))

#set( $prhits = $hits.getPositionRender() )
#ifnotnull($currentpage)
$prhits.setPageOneBased($currentpage)
#end
#set($pos = $prhits.toPosition($prhits.getPage()))

#set($resultsPage = "$componenthome/results/index.html?hitssessionid=$!hits.sessionId&pageposition")
#set($targetdivinner = "${module.id}resultsarea")
#set($oemaxlevel = "2")



<div class="emgridflex">
	<div id="galleryimg-${rendertype}" 
		class='emgrid entitiescontainer' 
		data-fixedwidth="170" 
		data-cellpadding="10"
		data-entityrenderurl="$siteroot$apphome/views/modules/$module.id/components/gridsample/gridcell.html"
		data-rendertype="$rendertype">
	    	#foreach( $hit in $hits.getPageOfHits())
				$context.putPageValue("hit", $hit)
			    ##$pages.include("$apphome/components/gridsample/gridcell.html", $context)
			     <div class="emgridcell emgridcellC emgridcell-$rendertype activelistcontainer 
	 			#if($selectedid == $hit.getId() || $topselectedid == $hit.getId()) active #end
	 			"> 
				#set($rendertype = $module.modulerendertype)
				#if (!$rendertype)
		   			#set($rendertype = "entity")
				#end
			    $pages.include("$apphome/views/modules/$!{moduleid}/components/gridsample/types/${rendertype}.html", $context)
			    </div>
			#end
	</div>  
	  
	<div class="emgridnav" style="padding-left:4px;">
		#if ( $prhits.prevPosition() )
			<a href="$resultsPage=$prhits.prevPosition()" class="ajax" data-updateurl="$!updateurl" 
			data-oemaxlevel="$oemaxlevel" data-targetdiv="$targetdivinner">
			<img src="$apphome/theme/images/arrow-right.svg"	style="width:20px;" />
			</a>
		#end
	</div>
	
	</div>
	<div class="clearfix"></div>
</div>

