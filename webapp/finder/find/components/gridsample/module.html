#set( $favorites = $userprofile.get("favorites_"+$module.id))
$context.putPageValue("favorites", $favorites)

#set($moduleid = $module.id)
#if($moduleid.startsWith("entity"))
	#set($rendertype = "entity")
#else
	#set($rendertype = $module.id)
#end


	
<div class="emgrid-subtitle">
	#if($content.get("section") != "favorites")
	<a class="badge badge-success  emdialog TODOautocloseside" style="margin:4px; float:right"  data-hidefooter="true" title="$module: [[Add New]]"
				href="$siteroot$applink/components/upload/entities/addnewentity.html?viewid=${module.id}addnew&searchtype=${module.id}">
				<i class="fas fa-plus"></i> Add New </a>
	
	
   		<h3>
	     	#set($moduleicon = $rendertype)
	     	#if ($module.moduleicon)
	     		#set($moduleicon = $module.moduleicon)
	     	#end
	
			<img src="$siteroot$apphome/theme/images/entity/${moduleicon}.svg" style="height: 24px;"> 
			
			#if( $hits.size() < 7) ##this is safe
				#set( $count = $hits.size())
			#else
				#set( $count = $filter.getCount($module.id) )
			#end
	
			$module.getName() <span class="count">($count)</span>  
		</h3>
		
	#end
	#if($hits.getTotalPages() >  1  )
		$pages.include("$componenthome/results/pages.html", $context)
	#end
		<div class="clearfix"></div>
</div>



<div id="galleryimg-${rendertype}" class='emgrid #if($section != "favorites")emgridlimited#end' 
	data-colwidth="425" 
	data-cellpadding="30">
     	
     	#if ($module.modulerendertype)
     		#set($previewrendertype = $module.modulerendertype)
     	#end

		
		#foreach( $hit in $hits.getPageOfHits())
			$context.putPageValue("hit", $hit)
		     <div class="emgridcell emgridcell-$rendertype">
		     $pages.include("$apphome/components/gridsample/types/${rendertype}.html", $context)
			 </div>
		#end
		
</div>  
#if($hits.nextPage())
	$pages.include("$componenthome/results/pages.html",$context)
#end