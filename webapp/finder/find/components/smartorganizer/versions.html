<div class="d-flex flex-column bg-white m-4 rounded" 
  style="width: 800px; max-width: 100%;" 
  data-setpagetitle="Version Manager" 
  id="templateVersionsInner"
  data-renameurl="$apphome/components/smartorganizer/rename.html"
  >
  
  #set( $list = $mediaarchive.query("smartorganizer").all().sort("updatedonDown").search($context) )
  
  <div class="d-flex justify-content-between border-bottom px-3 pt-3 pb-2">
    <h3 class="text-center m-0 text-dark">[[Version Manager]]</h3>
    <button class="btn text-muted closemodal">
      <i class="bi bi-x-lg"></i>
    </button>
  </div>
  <div class="version-list px-2 pb-2">
    #foreach( $template in $list)
    <div class="p-2 version-list-item #if($template.iscurrent == 'true') version-list-current #end">
      <div class="d-flex align-items-center justify-content-between">
        <div class="version-row d-flex align-items-center" data-versionid="$template.id">
          <i class="bi bi-clock-history ns text-muted me-2"></i>
          <span class="version-name">#text($template)</span>
          <div class="version-input" style="display: none;">
            <input type="text" class="form-control name" value="#text($template)" />
            <button class="btn btn-sm btn-brand rename ms-2" >
              <i class="fas fa-save"></i>
            </button>
            <button class="btn btn-sm cancel">
              <i class="bi bi-x-lg"></i>
            </button>
          </div>
          <button class="rename-version ms-1" title="[[Rename Version]]">
            <i class="bi bi-pencil-fill text-muted"></i>
          </button>
        </div>
        <div class="d-flex align-items-center">
			
          #if($template.iscurrent != "true")
          <a class="btn btn-sm btn-accent px-2 me-2 restoreversion" href="$applink/components/smartorganizer/restore.html" data-oemaxlevel="1" 
          	data-targetdiv="smartorganizermain" data-restoreid="$template.id" title="[[Restore]]">
				[[Restore]]
          </a>
          #end
          <a class="btn btn-sm btn-accent px-2 me-2 ajax" href="$applink/components/smartorganizer/copy.html" data-oemaxlevel="1" data-targetdiv="#templateVersionsInner" data-id="$template.id" title="[[Copy]]">
            <i class="bi bi-copy"></i>
          </a>
          
          <a class="btn btn-sm btn-danger px-2 ajax" data-id="$template.id" title="Delete" href="$applink/components/smartorganizer/delete.html" data-confirm="[[Are you sure you want to delete this version?]]" data-oemaxlevel="1" data-targetdiv="#templateVersionsInner" data-id="$template.id">
            <i class="bi bi-trash"></i>
          </a>
          
        </div>
      </div>
      <div class="d-flex">
        <small class="mx-4">
          <i class="bi bi-circle-fill ns text-success me-1"></i> $!mediaarchive.getUser($template.getValue("updatedby"))<span class="mx-1">&middot;</span>Last updated on $!context.getDateTime($template.getValue("updatedon"))
        </small>
      </div>
    </div>
    #end
  </div>
</div>
