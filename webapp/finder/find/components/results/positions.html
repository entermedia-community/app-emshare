##needs 	$hits  $moduleid

#if(!$moduleid)
#set($moduleid = $context.getRequestParameter("moduleid"))
#end

#set($reloadsearchtype = $moduleid)

#if($moduleid=="asset")
		#if($categoryid || $collectionid)
			#set($resultsPage = "$applink/views/modules/asset/showcategory.html")
			#set($resultsPage = "$resultsPage?hitssessionid=$!hits.sessionId&searchtype=$!hits.getSearchType()")
			#set($resultsPage = "$resultsPage&nodeID=$!categoryid&collectionid=$!collectionid")
			#set($resultsPage = "$resultsPage&pageposition")
		#else
			#set($resultsPage = "$applink/views/modules/asset/index.html?pageposition")
		#end

		#set($oemaxlevel = "1")
#elseif($moduleid=="librarycollection")
		#if(!$resultsPage)
			#set($resultsPage = "$applink/views/modules/librarycollection/media/showcategory.html")
		#end
		#set($resultsPage = "$resultsPage?hitssessionid=$!hits.sessionId&searchtype=$!hits.getSearchType()")
		#set($resultsPage = "$resultsPage&categoryid=$!categoryid&collectionid=$!collectionid")
		#set($resultsPage = "$resultsPage&pageposition")
		
		#set($oemaxlevel = "1")
		#set($librarycollectionassets = $context.findValue("librarycollectionassets"))
		#if($librarycollectionassets)
			#set($reloadsearchtype = "asset")
		#end
#else
	#if(!$resultsPage)
		#set($resultsPage = "$componenthome/results/index.html")
	#end
	#set($resultsPage = "$resultsPage?hitssessionid=$!hits.sessionId&searchtype=$hits.getSearchType()")
	#set($resultsPage = "$resultsPage&resultstype=$!resultstype")
	#if($module)
		#set($resultsPage = "$resultsPage&module=$module.id")
	#end
	#set($resultsPage = "$resultsPage&pageposition")
	#set($oemaxlevel = "2")
#end

##  ##toRemove
##  #if ($ismodulesearch)
##  	$context.putPageValue('targetdivinner',  "modulesearchexpandedmodule")
##  	$context.putPageValue('oemaxlevel', "3")
##  #end

## $context.putPageValue('resultsPage',  $resultsPage)

#set($targetdivinner = "${moduleid}resultscontainer")

## $context.putPageValue('targetdivinner',  $targetdivinner)


## $context.putPageValue('oemaxlevel', $oemaxlevel)

#set($updateurl = "true")

#set($total = $hits.getTotalPages() )

#set($pos = $hits.toPosition($hits.getPage()))

#set($currentposition = $context.getRequestParameter("currentposition"))

<div class="resultspositions" data-url="$componenthome/results/positions.html" data-moduleid="$moduleid" data-hitssessionid="$!hits.getSessionId()" data-searchtype="$!hits.getSearchType()" data-currentposition="$!currentposition">
 <ul>
 
 
 <li>$!currentposition</li>
 
 
	#set( $befores = $hits.linksBefore() )
	#if(!$befores.isEmpty() && $befores.get(0)>1)
		<li><a class="ajax" data-targetdivinner="$targetdivinner" data-updateurl="$!updateurl" data-oemaxlevel="$oemaxlevel" href="$resultsPage=$total" >$total</a></li>	
	    <li class="ellipsis">...</li>
	#end
	#foreach( $before in $befores )
		#set( $pos = $hits.toPosition($before) )
		#set( $poslabel = $hits.toPositionLabel($before) )
		<li><a class="ajax" data-targetdivinner="$targetdivinner" data-updateurl="$!updateurl"  data-oemaxlevel="$oemaxlevel" data-position="$pos"  href="$resultsPage=$pos" >$poslabel</a></li>		
	#end
	#set($pos = $hits.toPosition($hits.getPage()))
	#set( $poslabel = $hits.toPositionLabel($hits.getPage()) )
	<li class="current"><a  class="ajax" data-targetdivinner="$targetdivinner" data-updateurl="$!updateurl"  data-oemaxlevel="$oemaxlevel" data-position="$pos"  href="$resultsPage=$pos" >$poslabel</a></li>
	#set( $afters = $hits.linksAfter() )
	#foreach( $after in $afters )
		#set( $pos = $hits.toPosition($after) )
		#set( $poslabel = $hits.toPositionLabel($after) )
		<li><a  class="ajax" data-targetdivinner="$targetdivinner" data-updateurl="$!updateurl" data-oemaxlevel="$oemaxlevel" data-position="$pos"  href="$resultsPage=$pos">$poslabel</a></li>		
	#end
	#set($size=${afters.size()})
	#set( $size = $size - 1 )
	#if($size>0  )
		#if ($afters.get($size)< $hits.getTotalPages() )
			<li class="ellipsis">...</li>
			#if($hits.size() < 9999)
                    <li><a  class="ajax" data-targetdivinner="$targetdivinner" data-updateurl="$!updateurl" data-oemaxlevel="$oemaxlevel" href="$resultsPage=1" >1</a></li>	
                   #end
		#end
	#end
	#if( $hits.prevPage() )
		<li class="pagenav"><a class="ajax" data-targetdivinner="$targetdivinner"  data-updateurl="$!updateurl"  data-oemaxlevel="$oemaxlevel" href="$resultsPage=$hits.toPosition($hits.prevPage())" title="Previous ( alt p enter)" accesskey="p" ><span class="fas fa-caret-left overlay-nav gocaret"></span></a></li>
	#end
	#if ( $hits.nextPage() )
		<li class="pagenav"><a id="next" class="ajax" data-updateurl="$!updateurl" data-oemaxlevel="$oemaxlevel" data-targetdivinner="$targetdivinner"  href="$resultsPage=$hits.toPosition($hits.nextPage())" title="Next (alt n enter)" accesskey="n"><span class="fas fa-caret-right overlay-nav gocaret"></span></a></li>
	#end
</ul>
</div>




	 	