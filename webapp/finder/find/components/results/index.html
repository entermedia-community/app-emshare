#if(!$module)
	#set($module = $context.getRequestParameter("module"))
#end
#if(!$module)
	#set($module = $context.getRequestParameter("moduleid"))
#end
#if(!$module)
	#set( $module = $content.module)
#end

##fix module vs moduleid
#if($module)
	#if($module.id)
		#set($moduleid = $module.id)
	#else
		#set($moduleid = $module)
	#end
#end

#if (!$nodeID)
	#set($nodeID = $context.getRequestParameter("nodeID"))
	$context.putPageValue("nodeID",$nodeID)
#end

#if( !$librarycol && $category ) 
	#set( $librarycol = $mediaarchive.query("librarycollection").orgroup("rootcategory",$category.getParentCategories()).searchOne() )
#end

#if( !$librarycol )
	#set($collectionid = $context.getRequestParameter("collectionid"))
	#if($module =="librarycollection" && $collectionid)
		#set( $librarycol = $mediaarchive.query("librarycollection").exact("id",$collectionid).searchOne() )
	#end
#end

#if( $librarycol )	
	$context.putPageValue("librarycol", $librarycol)
#end

##if($moduleid =="librarycollection" && $hits.size() == 0 && $mediaarchive.isCatalogSettingTrue("autopopulatecollections"))
##	$pages.include("$apphome/components/createmedia/copycategory/index.html?autorun=true", $context)
##else
##end


	###if($content.resultview)
	##	#set($resultview = $content.resultview)
	
	#if ($moduleid=="modulesearch")
		#set($resultview = $userprofile.get("mediaappresultview"))
		#if(!$resultview)
			#set($resultview = $content.get("mediaappresultview"))
		#end
		#if(!$resultview)
			#set($resultview = "grid")
		#end
	#elseif($moduleid=="asset")
		#set($resultview = $userprofile.get("assetresultview"))
		#if(!$resultview)
			#set($resultview = "stackedgallery")
		#end
	#elseif($moduleid=="librarycollection")
		#set($resultview = $content.resultview)
		#if(!$resultview)
			#if($librarycollectionassets)
				##Show assets on collction
				#set($resultview = $userprofile.get("librarycollectionassetsresultview"))
				#if(!$resultview)
					#set($resultview = "stackedgallery")
				#end
			#end
		#end
		#if(!$resultview)
			#set($resultview = $userprofile.get("${moduleid}resultview"))
		#end
		#if(!$resultview)
			#set($resultview = "grid")
		#end
	#elseif ($moduleid=="faceprofilegroup")
		#set($resultview = $userprofile.get("faceprofilegroupresultview"))
		#if(!$resultview)
			#set($resultview = "grid")
		#end
	#else
		##All Other Entities
		
		#set($resultview = $userprofile.get("${moduleid}resultview"))

		#if(!$resultview)
			#set($resultview = $content.get("${moduleid}resultview"))
		#end
		#if(!$resultview)
			#set($resultview = $context.getRequestParameter("resultstype"))
		#end
		#if(!$resultview)
			#set($resultview = $content.resultview)
		#end
		#if(!$resultview)
			#set($resultview = "table")
		#end
	#end
	
	$context.putPageValue("resultview",$resultview)
	
	
	
	$pages.include("$componenthome/results/resultviews.html", $context)


