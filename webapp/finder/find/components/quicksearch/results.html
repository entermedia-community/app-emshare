#set($popupheight = 10)

#if($livesuggestions.size())
	#set($popupheight = $popupheight+50)
#end
#if($topichits.size())
	#set($popupheight = $popupheight+60)
#end

#set( $moduleid = $context.getRequestParameter("moduleid") )
#set( $url = "$applink/views/modules/$moduleid/index.html")
##set($url = "$!siteroot$applink/views/modules/modulesearch/index.html")

#set($ajax = $context.getRequestParameter("ajax")) 

<div class="quicksearchresults" style="position:relative; height: ${popupheight}px; ">

#if($livesuggestions.size())
<div style="position:absolute; top:0px; right:2px; color:#333;">
<span title="[[Esc to Close]]" class="fas fa-window-close"></span>
</div>
<h3>[[Suggested]]</h3>
<ul class="qsrecent">
#foreach ($suggestion in $livesuggestions)
	#set( $k = $suggestion.getKeyword() )
	##if (!$ajax)
	##set($url = "$url?operation=contains&field=description&description.value=#esc($k)&clearfilters=true")
	##end
		
	<li>
		<a href="$url" 
			data-oemaxlevel="1" 
			data-searchtype="modulesearch" 
			data-field="description" 
			data-operation="contains" 
			data-targetdivinner="applicationmaincontent"
			data-description.value="#esc($k)" 
			class="badge badge-light ajax" >
			 <span>$suggestion.getBold()</span></a>  ##make bold
	</li>	 
#end
</ul>
<div class="clearfix"></div>
#end

</div>