<div id="lightboxessidemenu" class="overflow-y">
	#set($assetsadded = $context.getPageValue("assetsadded"))
	#set($assetsaddedto = $context.getRequestParameter("lightboxid"))

	#foreach( $box in $boxes )
	
		<div class="rounded lightboxdropasset" data-entityid="$entity.id" data-moduleid="$topmodule.id" data-lightboxid="$box.id">
			<a class="ajax btn-wide #if( $box.id == $selectedbox.getId() ) active #end"
				data-targetdiv="tablightboxes"
				data-oemaxlevel="1"
				href="$componenthome/entities/lightboxes/show.html?lightboxid=$box.id&entityid=$entity.id&moduleid=$module.id">
			
			#set( $moduleicon = $box.moduleicon)
			#ifnull($moduleicon)
				#set( $moduleicon = "check-circle-fill")
			#end
			<i class="bi bi-${moduleicon}"></i>
			<span>
				#text($box) 
				#set( $val = $hitcounts.get( $box.getName() ) )
				#ifnotnull( $val )
					(${val})
				#end
			</span>
			#ifnotnull( $assetsadded )
				#if($box.id == $assetsaddedto )
					<span class='fader emnotify'>+$!{assetsadded}</span>
				#end
			#end
			</a>
		</div>
	#end

	<div id="entitypicker" 
		data-entityid="$entity.id" 
		data-moduleid="$topmodule.id"
		class="rounded assetdroplightbox side-select-menu">
		<a class="ajax btn-wide #ifnull($selectedbox) active #end" 
			data-targetdiv="tablightboxes" 
			data-oemaxlevel="1" href="$componenthome/entities/lightboxes/show.html?lightboxid=files&entityid=$entity.id&topmoduleid=$module.id">
			#set( $moduleicon = $mediaarchive.getCachedData("module","asset").moduleicon)
			#ifnull($allassets)
				#set($defaultfolder =  $mediaarchive.getBean("entityManager").loadDefaultFolder($module, $entity, $context.getUser(),true))
				#set($allassets = $mediaarchive.query("asset").exact("category",$defaultfolder).search($context) )
			#end
			<i class="bi bi-${moduleicon}"></i>
			<span>
				[[Working Files]]
				($allassets.size())
			</span>
		</a>
	</div>
</div>