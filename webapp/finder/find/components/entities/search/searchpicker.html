<div id="pickersearchentities" >
	 
	#set( $searcher = $mediaarchive.getSearcher($searchtype) )
	$context.putPageValue("searcher",$searcher)
	
	#set($assethitssessionid = $context.getRequestParameter("assethitssessionid"))
	#set($assetid = $context.getRequestParameter("assetid"))
	
	#set( $hits = $context.getSessionValue($assethitssessionid))
	
	#if( $hits || $assetid)
	<div class="alert alert-info">
		
		#if( $hits && $hits.getSelectionSize() > 0)	
		  		<strong>[[Adding]]</strong> $hits.getSelectionSize() [[assets]]
		#elseif($assetid)	
				<strong>[[Adding]]</strong> 1 [[asset]]
		#end	
	</div>
	#end
	
	#set($addnew = "$apphome/views/modules/$searchtype/components/gridsample/preview/entity.html")
	
	#if($assetid)
		#set($addnew = "${addnew}?edit=true&addnew=true&viewfiles=true&saveaction=addassets&assetid=$assetid")
	#else
		#set($addnew = "${addnew}?edit=true&addnew=true&viewfiles=true&uploadmedia=true&assethitssessionid=$assethitssessionid")
	#end
	<a class="btn btn-sm btn-blue emdialog"
		style="margin-bottom: 10px;"
		href="$addnew" 
		>
		[[New]] $module</a>
     
    <form  id="colsearchform" 
	    class="ajaxform autosubmit"  
	    data-targetdivinner="entitypickerresults" 
	    action="$home$apphome/views/modules/$searchtype/components/entities/search/results.html">

		<input type="hidden" name="sortby" value="name" />
		<input type="hidden" name="assetid" value="$!asset.id" />
		<table  width="100%">
		<tr>
		<td>
		<div class="row inlinesearch" style="margin-bottom: 10px;;" >
			$context.putPageValue("autocomplete","off")
			<input type="hidden" name="operation" value="contains" />
			<input type="hidden" name="field" value="description" />
			<div class="col">
			<input type="text" name="description.value" class="form-control" placeholder="[[Or search for existing]]" autocomplete="off" />
			</div>
	
##			#foreach( $detail in $details)
##			<div class="col">
##					$context.putPageValue("detail", $detail)
##					$pages.include("/${applicationid}/components/advancedsearch/detaileditinline.html", $context)
##			</div>
##			#if( $counter == 4)
##				</div>
##				<div  class="row" >
##			#end	
##			#end
	
		</div>	
		</td>
		
		</tr>
		</table>
	</form>
	
	
	<div id="entitypickerresults"
		class="pickerresults"
			
		#if($assetid)
			data-clickurl="$applink/views/modules/$searchtype/components/entities/addassetstoentity.html"
			data-clicktargetdiv="applicationmaincontent"
			data-clicktargettype="message"
			data-assetid="$assetid"
		#else
			data-clicktargettype="entitydialog"
			data-emdialoglink="$applink/views/modules/${searchtype}/components/gridsample/preview/entity.html"
			data-uploadmedia="true"
		#end
		
		
		data-viewfiles="true"
		data-moduleid="$searchtype"
		#if($assetid)
			
		#else
			data-assethitssessionid="$!assethitssessionid"
		#end>
	
		$pages.include("$apphome/components/entities/search/results.html",$context)
		
	</div>
	

</div>	
