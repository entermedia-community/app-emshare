#set($moduleid = $module.getId())

<div class="moduleindex"
	data-hitssessionid="$!hits.getSessionId()"
	data-url="$apphome/views/modules/$!{module.id}/index.html"
	data-oemaxlevel="1">
	
	
 	<div class="emgrid-box expandedmodule">
 		<div class="emgrid-subtitle">
  		<h3>
     	#set($moduleicon = "entity")
     	#if ($module.moduleicon)
     		#set($moduleicon = $module.moduleicon)
     	#end
     	
    		#set($entityurl = "$siteroot$apphome/views/modules/$module.id/index.html")

		<img src="$siteroot$apphome/theme/images/entity/${moduleicon}.svg" style="height: 24px;"> 

				#set( $count = $hits.size()) 
				#text($module)
				 <span class="count">($count)</span>
		</h3>
		
		#if($permissions.can($moduleid, "create"))
		<a class="btn btn-xs btn-addentity emdialog TODOautocloseside" 
			style="margin-right:5px; "  
			title="[[Add New]] #text($module)"
			href="$siteroot$applink/views/modules/${moduleid}/components/gridsample/preview/$!{rendertype}.html?edit=true&addnew=true&viewid=$!{module.id}addnew&targetdiv=applicationmaincontent"
			data-hidefooter="true">
			<i class="fas fa-plus"></i></a>
		#end
		
	<div class="float-right" style="padding-right:10px;">
		<a href="$applink/index.html" 
		class="ajax minimizeexpandedmodule"
		title="[[Collapse]] #text($module)"
		data-oemaxlevel="3"
		data-updateurl="true"
		data-targetdiv="applicationcontent"
		data-profilepreference="defaultmodule"
		data-profilepreference.value="none"
		>
		<i class="fas fa-minus-square"></i>
		</a>
	</div>
	<div class="clearfix"></div>
</div>

<div id="${moduleid}resultsarea" 
 	class="resultsarea"
	data-hitssessionid="$!hits.getSessionId()"
	##data-autoreloadevents="entitysave"
	data-moduleid="$!module.id"
	data-searchtype="$!module.id"
	data-url="$apphome/views/modules/$!{module.id}/index.html"
	data-oemaxlevel="1"
 	>
$pages.include("$componenthome/results/index.html", $context)
<div class="clearfix"></div>
</div>

</div>

</div>