#ifnull($viewid)
	#set($viewid = "${module.id}resultstable")
	$context.putPageValue("viewid",$viewid)
#end	

<div id="emresultscontent" 
#if($desktop) 
	class="desktopdropentity"
	data-targetlink="$siteroot$apphome/views/modules/${module.id}/editors/entitydesktopdrop/editdialog.html?edit=true&addnew=true&viewid=${module.id}addnew"
	data-dialogtitle="Add New ${module.name}"
	data-hidefooter="true"
	data-dialogid="entitydesktopdropeditdialog"
#else 
	class="dropentity" 
#end 
	data-categorypath="${module}" 
	data-moduleid="${module.id}">

	$context.putPageValue("showcaption", $page.isPropertyTrue("showcaption"))
	$context.putPageValue("resultstype", $context.getRequestParameter("resultstype"))

	$pages.include("${searchhome}/resultheader.html",$context)

	#set($isdraggable = false)

	#if($module && $permissions.canModule($module, "assign_files"))
		#set($isdraggable = true)
	#end

	$context.putPageValue("isdraggable", $isdraggable)

	#if ( $hits && $hits.size() > 0 )
		#set( $details = $searcher.getDetailsForView($viewid,$userprofile) )
		$context.putPageValue("details",$details)
		<div class="table-autoresize-inner">	
			
			<table id="main-results-table" class="table table-striped table-hover emresultstable" >
				$pages.include("${searchhome}/types/tableheader.html",$context)
				#set($count = 0)
				#foreach( $hit in $hits.getPageOfHits() )
					$context.putPageValue("hit", $hit)
					$context.putPageValue("count", $count)
					$context.putPageValue("sourcepath", $hit.sourcepath)
					$pages.include("${searchhome}/types/row.html", $context)
					#set($count = $count + 1)
				#end
			</table>
		</div>
	#else
		$pages.stream("$!{searchhome}/empty.html", $context)
	#end
</div>
