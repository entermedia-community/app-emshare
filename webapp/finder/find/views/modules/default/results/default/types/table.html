#ifnull($viewid)
	#set($viewid = "${module.id}resultstable")
	$context.putPageValue("viewid",$viewid)
#end	

<div id="emresultscontent">


$context.putPageValue("showcaption", $page.isPropertyTrue("showcaption"))
$context.putPageValue("resultstype", $context.getRequestParameter("resultstype"))

$pages.include("${searchhome}/resultheader.html",$context)

#if ( $hits && $hits.size() > 0 )

    #set( $details = $searcher.getDetailsForView($viewid,$userprofile) )
    
	$context.putPageValue("details",$details)
	
	<div class="table-autoresize-inner">	
	
		<table id="main-results-table" class="table table-striped table-hover emresultstable stackedplayertable" >
				$pages.include("${searchhome}/types/tableheader.html",$context)
				#set($count = 0)
				#foreach( $hit in $hits.getPageOfHits() )
					$context.putPageValue("hit", $hit)
					$context.putPageValue("count", $count)
					$context.putPageValue("sourcepath", $hit.sourcepath)
					$pages.include("${searchhome}/types/row.html", $context)
					#set($count = $count + 1)
				#end
		</table>
	
	</div>
	#if ($resultview != "map" && $resultview != "stackedgallery")
		<div class="table-pagination">
			<p class="m-0">
				<span>$!hits.getPageStart()</span> &mdash; <span>$!hits.getPageEnd()</span>  [[of]] <span>$!hits.total</span>
			</p>
		</div>
	#end

#else
	$pages.stream("$!{searchhome}/empty.html", $context)
#end
</div>

