<div id="$edithomeid" class="editdiv" data-entityid="$entity.id">
<div class="tabheader">
	[[Additional Permissions]] <span class="mx-2">&middot;</span> 
	<span class="hint">[[Others who can view or edit this folder and files]]</span>
</div>

<div id="embed-wrapper" class="mt-4 px-3">
	<div class="row no-gutters mb-3">
		<div class="col-12 col-md-4">

			<form name="savepermiossions" 
				class="ajaxform autosubmitform force-validate-inputs mt-3 no-toast" 
				data-targetdiv="$edithomeid"
				data-oemaxlevel="1"				
				method="post"  
				action="$apphome/views/modules/${module.id}/editors/entityadminsettings/permissions/permissionsave.html">
				
				
				<h4>[[Custom Permissions]]</h4>
				<div class="form-check mb-3 h-auto py-2 public-permission rounded" style="padding-left: 1.75rem;">
					<input class="form-check-input" name="securityalwaysvisible" #if($entity.securityalwaysvisible == true) checked #end type="checkbox" value="true" id="makeEntityPublic">
					<label class="form-check-label" for="makeEntityPublic">
						[[Anyone Can View]]
					</label>
					<p class="checkedhint m-0">[[This record is now visible to anyone who has access to the module.]]</p>
				</div>

				<input name="entityid" type="hidden" value="$entity.id" />
							
			#foreach($permission in $entitypermissions)
			<div class="d-flex align-items-center bg-light rounded pl-2 pr-1 py-1 mb-2 border" id="permission-$permission.id">
				<span class="mr-2 fw-bold">
					#text( $permission.getData() )
				</span>
				<span class="bg-secondary text-white px-1 rounded fs-small" style="padding-bottom: 2px;">$permission.getPermissionType()</span>
				<div class="d-flex align-items-center ml-auto">
					<input type="hidden" name="dataid" value="$permission.getData().getId()" />
					<input type="hidden" name="permissiontype" value="$permission.getPermissionType()" />
					#if($permission.getData().getId() != $entity.get("owner"))
					<select name="iseditor" class="form-control w-auto rounded py-1 px-2" >
						<option value="false" #if( !$permission.isEditor() ) selected #end>[[Can View]]</option>
						<option value="true" #if( $permission.isEditor() ) selected #end>[[Can Edit]]</option>
					</select>
					
					<a class="ajax text-muted"
						href="$apphome/views/modules/${module.id}/editors/entityadminsettings/permissions/permissionremove.html?id=$!{entity.id}"
						data-dataid="$permission.getData().getId()"
						data-targetdiv="$edithomeid"
						data-oemaxlevel="1"
					 	data-confirm="[[Are you sure you want to remove this permission?]]" 
						data-removeonsuccess="true" 
						data-removetarget="permission-$permission.getData().getId()">
						<i class="bi bi-x-circle ns ml-2 mr-1"></i>
					</a>
					#else
					[[Owner]]
					#end
				</div>
			</div>
			#end
			</form>
			<div>
				<a class="emdialog btn btn-cta" 
					href="$apphome/views/modules/${module.id}/editors/entityexport/permissions/permissionadd.html?id=$!{entityid}" 
					data-dialogid="addpermission"
					data-includeeditcontext="true"
					data-edithomeid="${edithomeid}"
					data-hidefooter="true">
					<i class="bi bi-plus-lg mr-1"></i>[[Add]]</a>
			
				<a class="emdialog btn btn-danger confirm" 
					href="#?id=$!{entityid}" 
					data-dialogid="addpermission"
					data-includeeditcontext="true"
					data-edithomeid="${edithomeid}"
					data-hidefooter="true">
					<i class="bi bi-reset mr-1"></i>[[Reset to Default]]</a>
			</div>
		</div>
		
	</div>
	
	<div class="mt-4">
	<h4>[[Parent Permissions]]</h4>
	
	--Show Parent Permissions--
	</div>
	
	<div class="mt-4">
	<div class="text-muted">[[Customizations will overwrite parent permissions.]]</div>
	</div>
</div>

</div>