#set($toplevelaifunctionid = $agentcontext.getTopLevelFunctionName())

#set($aifunction = $mediaarchive.getCachedData("aifunction", $toplevelaifunctionid))

<div class="ai-functions mx-2">
  <div class="d-flex align-items-center">
		<div class="dropup">
			<a class="btn btn-cta dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
				<span class="pe-1">
					#text($aifunction)
				</span> 
			</a>
			<div class="dropdown-menu dropdown-menu-end">
					#set($aifunctions = $mediaarchive.query("aifunction").exact("toplevel",true).sort("ordering").search())
					#foreach( $function in $aifunctions )
						<a class="dropdown-item  ajax ai-func #if($toplevelaifunctionid == $function.getId())active#end me-2"
							href="$edithome/toplevelfunctionsave.html"
							data-targetdiv="aichatsearch"
							data-channel="$!{currentchannel.getId()}"
							data-toplevelaifunctionid="$function.id"
							data-functionname="$function.id"
							data-showsuggestions="true"
							data-oemaxlevel="1">
							<i class="bi bi-${function.icon}"></i>
							<span>#text( $function )</span>
						</a>
					#end 
			</div>	
		</div>
  </div>
  
</div>
