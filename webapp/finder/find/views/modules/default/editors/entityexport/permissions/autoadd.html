#ifnull( $viewid )
	#set($viewid = $context.getRequestParameter("viewid"))
#end
#set( $moduleid = $context.findValue("module") )

#set($id = $data.id )
#ifnull( $id )
	#set( $id = $context.getRequestParameter("id") )
#end
	#set( $caneditdata = true)

$context.putPageValue("viewid", $viewid)

<form name="permission-picker" 
	class="ajaxform autocloseform autosubmitform force-validate-inputs mt-3 noToast" 
	data-ajaxreloadtargets="permission-fields"
	method="post"  action="${edithome}/save.html" enctype="multipart/form-data">

	<input name="save" type="hidden" value="true" />
	<input name="id" type="hidden" value="$!id" />
	<input name="categoryid" type="hidden" value="$!id" />
	<input name="nodeID" type="hidden" value="$!id" />
	<input name="viewid" type="hidden" value="$viewid" />
	<input name="${hits.getSearchType()}hitssessionid" type="hidden" value="$hits.sessionId" />
	
	<div class="d-flex flex-column">
		#set( $origURL = $context.getRequestParameter("origURL" ) )
		#set ( $moduleid = $context.findValue("module") )
		#if($caneditdata)
			$pages.include("/$applicationid/components/xml/detaileditor.html?longform=true", $context)
		#else
			$pages.include("/$applicationid/components/xml/detaileditor.html?detailsreadonly=true&alwaysshow=false", $context)
		#end
	</div>
</form>
