#set($searchhome = "$apphome/views/modules/${module.id}/results/default")
#set($detailid = $context.getRequestParameter("pickertargetfield"))
$entity.addValue($detailid, $data.id)
#set($values = $entity.getValues($detailid))

<ul class="entity-value-list" id="entitypicker${detailid}" data-ismulti="$!{ismulti}">
		#foreach( $type in $values )
			#set( $row = false )
			#set( $row = $mediaarchive.getCachedData($module.id, $type ))
			
		    #if( $row )
	   		   #set($namefield = $mediaarchive.getSearcher($module.id).getDetail("name"))
			   #set($name = $searcherManager.getValue($row, $namefield, $context.getLocale()))
			    #set($entityid = $row.id)
			    #set($link = "${edithome}/tabs/index.html?entityid=$entity.id")
			    <li>
			    <a href="$link" 
			    	class="emdialog entity-dialog" 
			    	data-noesc="true" 
			    	data-entityid="$!row.getId()"
			    	title="$name">$name</a>  
			    	<a class="removeentity"  href="#" title="[[Remove]] $!name" onclick='$(this).closest("li").remove(); return false;'><i class="bi bi-x"></i></a>
			    	<input type="hidden" name="${detailid}.value" value="$!row.getId()" />
			    </li>
		    #end 
		#end
		
		
</ul>