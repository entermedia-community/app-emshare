<!-- 
<div id="$!{moduleid}topcontainer"
	class="topmodulecontainer $!{moduleid}topcontainer"
	data-hitssessionid="$!hits.getSessionId()"
	data-url="$apphome/views/modules/$!{module.id}/index.html"
	#if($topentityid) data-topentityid="$!topentityid" #end
	data-oemaxlevel="2">
 -->

#set($searchcategoryid = $context.getRequestParameter("searchcategoryid"))

#ifnotnull($searchcategoryid)
		#set( $searchcategory = $mediaarchive.getCachedData("searchcategory",$searchcategoryid) )
		$context.putPageValue("searchcategory", $searchcategory)
#end

<div id="$edithomeid"  
	class="editdiv #ifnull($searchcategoryid)listsearchcategories #end #ifnotnull($searchcategoryid) listofentities #end" 
	data-edithome="${edithome}"
	data-edithomeid="${edithomeid}"
	
	data-entityid="$!searchcategory.id"
	data-entitymoduleid="searchcategory"
>

	<div class="clickableresultlist"
		data-${module.id}hitssessionid="$!hits.getSessionId()"
		#ifnull( $searchcategoryid)
			#set($previewurl = "$edithome/index.html")
			data-url= "$previewurl"
			data-targetdiv="$edithomeid"
			data-oemaxlevel="1"
		#end
	>

	#if($searchcategoryid)

		##Search across modules for this category
		#set($searchhome = "$apphome/views/modules/modulesearch/results/searchcategory")
		$context.putPageValue("searchhome", $searchhome)
		
		#set( $module = $mediaarchive.getCachedData("module","modulesearch") )
		$context.putPageValue("module", $module)

		##Since I have not yet searched for modules to build side menu I have to do this in special xconf:		
		#set($url = "$searchhome/searchalltypes.html?field=searchcategory&operation=exact&searchcategory.value=$!searchcategoryid&resultviewmodulesearch=grid")
		$pages.include($url,$context)
		
	#else
	
		##Search for searchcategories 
		#set($searchhome = "$apphome/views/modules/searchcategory/results/searchcategory")
		$context.removeSessionValue("organizedModules")
	
		$context.putPageValue("searchhome", $searchhome)
		$pages.include("${edithome}/categorybreadcrumb.html", $context)
		
		$pages.include("${searchhome}/searchinline.html",$context)
	#end
	</div>
</div>


