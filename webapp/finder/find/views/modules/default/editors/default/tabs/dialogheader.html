#set($moduleid = $module.id)
<div class="entity-header d-flex align-items-center justify-content-between">
			<div class="d-flex align-items-center">
								
				<h2 class="d-flex align-items-center">
					
					#set($parententitymodule = $mediaarchive.getCachedData("module", $parententitymoduleid))
					#if ($parententitymodule.moduleicon)
						#set($parententitymoduleicon = $parententitymodule.moduleicon)
					#end
					#ifnull($parententitymoduleicon)
						#set($parententitymoduleicon = "grid")
					#end

					#ifnotnull($parententityid)
						<div class="parententityheader">
							
							<i class="bi bi-${parententitymoduleicon} module-icon"></i>
							<span>#text($parententitymodule)</span>
							<i class="bi bi-chevron-right mx-1 bi-small"></i>

							#set($parententity = $mediaarchive.getCachedData($parententitymoduleid, $parententityid))
							<a href="#" class="ajax entityNavBack" 
							style="display: none;"
							data-targetdiv="entitydialog" 
							data-entityid="$!{entity.id}" 
							data-oemaxlevel="1"
							#ifnotnull($parententitymoduleviewid)
								data-renderfirstview="true"
							#end
							title="[[Back to]] #text($parententity)" >
								<i class="bi bi-${parententitymoduleicon} module-icon"></i>
								#text($parententity)
							</a> 
							
							#ifnotnull($parententitymoduleviewid)
								#set($parententitymoduleviewdata = $mediaarchive.getCachedData("view", $parententitymoduleviewid))
								#set($parentsubmoduleid = $!parententitymoduleviewdata.rendertable) ##Sub module
								#set($parentsubmodule = $mediaarchive.getCachedData("module",$parentsubmoduleid))
								#if ($parentsubmodule.moduleicon)
									#set($parentsubmodulemoduleicon = $parentsubmodule.moduleicon)
								#end
								#ifnull($parentsubmodulemoduleicon)
									#set($parentsubmodulemoduleicon = "grid")
								#end
								<i class="bi bi-chevron-right mx-1 bi-small"></i>
								<a href="#" class="ajax entityNavBack" 
								style="display: none;"
								data-targetdiv="entitydialog" 
								data-entityid="$!{entity.id}" 
								data-oemaxlevel="1"
								title="[[Back to]] #text($parentsubmodule)" >
									<i class="bi bi-${parentsubmodulemoduleicon} module-icon"></i>
									#text($parentsubmodule)
								</a> 
							#end

							<i class="bi bi-chevron-right mx-1 bi-small"></i>

						</div>
					#end
					
					#*
					<a href="#" class="ajax entityNavBack" 
						style="display: none;"
						data-targetdiv="entitydialog" 
						data-entityid="$!{entity.id}" 
						data-oemaxlevel="1" >
						<i class="fas fa-arrow-left"></i>
					</a>
					*#
					 
					#if($moduleid == "faceprofilegroup")
						#text($module) <i class="bi bi-chevron-right mx-1 bi-small"></i>
						#if($entity.entitypeople)
							#set($people =  $mediaarchive.getCachedData("entitypeople", $entity.entitypeople))
							#set($label = "[[Profile]] $!people")
						#else
							#set($label = "$entity.samplecount")
						#end
					#else
						<div class="entitymodulelabel">
							<i class="bi bi-${parententitymoduleicon} module-icon"></i>
							<span>#text($module)</span>
							<i class="bi bi-chevron-right mx-1 bi-small"></i>
						</div>
						#if ($module.moduleicon)
							#set($moduleicon = $module.moduleicon)
						#end
						#ifnull($moduleicon)
							#set($moduleicon = "grid")
						#end
						<i class="bi bi-${moduleicon} module-icon"></i>
						
						#if($ismulti)
							<span class="entityheaderlabel" title="">
							[[Multi Edit]] $!entity.getSelectedResults().size() [[Items]]
							</span>		
						#else	
							#if($addnew=='true')
								<span class="entityheaderlabel" title="[[Add New]]">
								#set($label = "[[Add New]]")
								#text($label)	
								</span>
								$context.putPageValue("addnew", $addnew)
							#elseif($module.getValue("customname"))
								#set($detail= $mediaarchive.getSearcher($module.id).getDetail("name"))
								#set($label = $searcherManager.renderMask($entity, $detail ,$module.getValue("customname"), null, $context.getLocale()))
								<span class="entityheaderlabel" title="#text($label) "> 
								#text($label) 
								</span>
							#else
								#set($label = $!entity.getName($context))
								<span class="entityheaderlabel" title="#text($label)">
								#text($label) 				
								</span>
							#end
						#end
						
					#end 
				</h2>
				
				
				
			</div>
	
	
			<div class="d-flex entity-actions-bar align-items-center text-white position-relative mbl-hideexcept">
				#if($addnew=='true')
					<a class="btn btn-cta ajax me-2"
						href="$siteroot$applink/views/modules/$!{module.id}/editors/bulkentitycreator/index.html?edit=true&addnew=true" 
						data-entitymoduleviewid="$!{module.id}addnew"
						data-entitymoduleid="$!module.id"
						data-entityedithome="$!edithome"
						data-targetdiv="editentitymetadata"
						data-oemaxlevel="1"
						title="[[Bulk Folders from Files]]">
						<i class="bi bi-stack me-1"></i> [[Bulk Folders from Files]]
					</a>

					#if($mediaarchive.isCatalogSettingTrue("ai_create_enabled") && $permissions.canModule($module, "createwithai"))

						#set($withai = $context.getRequestParameter("withai"))
						
						#set($entityedithome = $context.getRequestParameter("entityedithome"))
						#if($withai != "true")
							<a class="btn btn-cta ajax"
								href="$siteroot$applink/views/modules/$!{module.id}/editors/contentcreatortoplevel/index.html?edit=true&addnew=true&withai=true" 
								data-entitymoduleviewid="$!{module.id}addnew"
								data-entitymoduleid="$!module.id"
								data-entityedithome="$!edithome"
								data-targetdiv="editentitymetadata"
								data-oemaxlevel="1"
								title="[[Create new]] #text($module) [[with AI]]">
								<i class="bi bi-magic me-1"></i> [[Create with AI]]
							</a>
						#else
							#set($addurl = "${entityedithome}/tabs/index.html?edit=true&addnew=true&viewid=$!{moduleid}addnew")
							<a href="$addurl"
								class='btn btn-accent ajax'
								data-entitymoduleviewid="$!{module.id}addnew"
								data-entityid="$!entity.getId()" 
								data-entitymoduleid="$!module.id"
								data-targetdiv="entitydialog"
								data-oemaxlevel="1"
								data-$!{module.id}hitssessionid="$!entityhits.getSessionId()"
								title="[[Create new]] #text($module)">
								<i class="bi bi-plus-lg me-1"></i> [[Create Manually]]
							</a>
						#end
						
					#end
				#end
						
				#if($entityhits && $entityhits.size() > 1)
					#set( $index = $entityhits.indexOfId($entity.getId()))
					#set( $previous = false )
					#set( $previous = $entityhits.previous($index))
					#set( $next = false )
					#set( $next = $!entityhits.next($index))
						<div class="d-flex align-items-center entity-navigator">
							#if($previous)
							<a class="text-white btn btn-accent me-1 emdialog entityupdateurl goleftclick" 
								href="${edithome}/tabs/index.html"
								data-$!{module.id}hitssessionid="$!entityhits.getSessionId()"
								data-moduleid="$!{module.id}"
								data-entityid="$previous.getId()"
								title="#text($previous)">
								<i class="bi bi-caret-left-fill"></i> <span>[[Prev]]</span>
							</a>
							#end
							#if($next)
							<a class="text-white btn btn-accent ms-1 emdialog entityupdateurl gorightclick"  
								href="${edithome}/tabs/index.html"
								data-$!{module.id}hitssessionid="$!entityhits.getSessionId()"
								data-moduleid="$!{module.id}"
								data-entityid="$next.getId()"
								title="#text($next)">
								<span>[[Next]]</span> <i class="bi bi-caret-right-fill"></i>
							</a>
							#end
						</div>
				 #end
				 
				 
				 
				 #if(!$ismulti && $entity.id)
 					<div class="entity-actions-bar mbl-hidden">

 						$context.putPageValue("itemid", $entity.id)
 						$pages.include("${edithome}/actions/addtobookmarks.html?id=$entity.id&moduleid=$module.id", $context)

 						#if($permissions.canModule($module, "shareentity"))
 							<a href="${edithome}/tabs/index.html" 
 							class="ajax btn-accent"
 							data-targetdiv="entitydialog"
 							data-entityid="$!entity.getId()" 
 							data-entitymoduleid="$!entitymodule.id"
 							data-entitymoduleviewid="${module.id}entityshare"
 							data-$!{module.id}hitssessionid="$!entityhits.getSessionId()"
 							data-oemaxlevel="1"
 							title="[[Share]]"><i class="bi bi-share"></i></a>
 						#end
 						
 						#if($canviewsettings)
 							<div class="dropdown">
 								<a class="dropdown-toggle btn-accent" href="#" data-toggle="dropdown">
 									<i class="bi bi-gear"></i>
 								</a>
 								<div class="dropdown-menu">

 							#if(!$ismulti && $entity)

 								#if($module.getBoolean("enableuploading"))
 								#if($permissions.canModule($module, "upload_files") ||
 									$permissions.canModule($module, "upload_folders") ||
 									$permissions.canModule($module, "importurl") ||
 									$permissions.canModule($module, "importassets") ||
 									$permissions.canModule($module, "importfolders") ||
 									($desktop && $permissions.canModule($module, "importpushtoserver")))
 									<a
 										class='dropdown-item ajax tabactionimport #if($entitymoduleviewid=="${module.id}entityimports") active #end '
 										href="$apphome/views/modules/$module.id/editors/entityimports/tabs/index.html" 
 										data-entitymoduleviewid="${module.id}entityimports"
 										data-entityid="$!entity.getId()" 
 										data-entitymoduleid="$!module.id"
 										data-targetdiv="entitydialog"
 										data-oemaxlevel="1"
 										data-tabsection="upload"
 										data-$!{module.id}hitssessionid="$!entityhits.getSessionId()"
 										>
 										<i class="bi bi-box-arrow-in-right me-2"></i> [[Import]]</a>
 								#end	
 								#end
 								#if($permissions.canModule($module, "copyentity") ||
 									$permissions.canModule($module, "moveentity") ||
 									$permissions.canModule($module, "downloadall") ||
 									$permissions.canModule($module, "shareentity") ||
 									($desktop && $permissions.canModule($module, "exportpulltoserver")))	
 									
 									<a 
 										class='dropdown-item ajax tabactionexport #if($entitymoduleviewid=="${module.id}entityexports")active #end '
 										href="${edithome}/tabs/index.html" 
 										data-entitymoduleviewid="${module.id}entityexports"
 										data-entityid="$!entity.getId()" 
 										data-entitymoduleid="$!module.id"
 										data-targetdiv="entitydialog"
 										data-oemaxlevel="1"
 										data-$!{module.id}hitssessionid="$!entityhits.getSessionId()"
 										>
 										<i class="bi bi-box-arrow-right me-2"></i> [[Export]]</a>
 								#end
 								
 							#end
 							
 								#if( $permissions.canModule($module, "viewerpermissions") )
 									<a 
 										class='dropdown-item ajax #if($entitymoduleviewid=="${module.id}entityadminsettings")active #end '
 										href="${edithome}/tabs/index.html" 
 										data-entitymoduleviewid="${module.id}entityadminsettings"
 										data-entityid="$!entity.getId()" 
 										data-entitymoduleid="$!module.id"
 										data-targetdiv="entitydialog"
 										data-oemaxlevel="1"
 										data-$!{module.id}hitssessionid="$!entityhits.getSessionId()"
 										>
 										<i class="bi bi-lock me-2"></i> [[Security]]</a>
 								#end

 								#if($canviewsettings)
 									<a class="dropdown-item ajax"
 										data-closealldialogs="true"
 										data-oemaxlayout="3"
 										data-updateurl="true"
 										data-targetdiv="applicationmaincontent"
 										href="$apphome/views/settings/modules/${module.id}/info/module-setup.html">
 										<i class="bi bi-sliders me-2"></i> #text($module) [[Settings]]
 									</a>
 								#end

 								</div>
 							</div>
 							
 						#end
 					</div>
 				#end
				
				
					
				<div class="entityclose mbl-except">
					<span title="[[Esc to Close]]" class="bi bi-x-lg ns"></span>
				</div>
			</div>
			
		</div>