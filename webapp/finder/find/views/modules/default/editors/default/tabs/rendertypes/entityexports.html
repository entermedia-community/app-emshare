
#ifnull($entitymoduleviewid)
#set($entitymoduleviewid = $context.getRequestParameter("entitymoduleviewid"))
#end
#set($tabid = "tab_$entitymoduleviewid")

#set ( $tabsection = $context.getRequestParameter("tabsection") )
#ifnull($tabsection)
#set ( $tabsection = "share")
#end

#set($defaultcategory = $mediaarchive.getEntityManager().createDefaultFolder($entity, $context.getUser()))
$context.putPageValue("defaultcategory", $defaultcategory)
$context.putPageValue("defaultcategoryid", $defaultcategory.getId())

#set($tabmode = 1)
$context.putPageValue("tabmode", $tabmode)

#set($entityexporthome = "$apphome/views/modules/${module.id}/editors/entityexport")

<div id="$!submodulepickerid" class="d-flex align-items-stretch" style="height: 100%;">
		<div class='entityimport auto-active-container overflow-y'>
			#if($permissions.can($module.id, "shareentity"))	
				<div class='auto-active-row #if($tabsection=="share") current #end'>
					<a href="$componenthome/share/entity.html?entityid=$!{entity.id}&defaultcategoryid=$!defaultcategory.getId()"
						class='btn btn-lg btn-wide ajax auto-active-link'
						data-targetdivinner="tabexportcontent"
						data-oemaxlevel="1">
						<i class="bi bi-share-fill"></i> <span>[[Share Links]]</span>
					</a>
				</div>
				<div class='auto-active-row #if($tabsection=="viewer") current #end'>
					<a href="$entityexporthome/permissions/index.html?entityid=$!{entity.id}&defaultcategoryid=$defaultcategory.getId()"
						class='btn btn-lg btn-wide ajax auto-active-link'
						data-targetdivinner="tabexportcontent"
						data-oemaxlevel="1">
						<i class="bi bi-eye-fill"></i> <span>[[Viewer Permission]]</span>
					</a>
				</div>
				<div class='auto-active-row #if($tabsection=="postiz") current #end'>
					<a href="$entityexporthome/postiz/index.html?entityid=$!{entity.id}&defaultcategoryid=$!defaultcategory.getId()"
						class='btn btn-lg btn-wide ajax auto-active-link'
						data-targetdivinner="tabexportcontent"
						data-tabsection="postiz"
						data-oemaxlevel="1">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28.82 31.92" fill="currentColor" width="40" height="36" style="margin:5px;">
							<path
								d="M4.9,4.62c0,.36.06.76.09,1.22L6.28,22.52c.15,1.86.22,2.79.64,3.47a3.26,3.26,0,0,0,1.56,1.35c.74.3,1.67.23,3.54.09l12.77-1a19.32,19.32,0,0,0,2.63-.3,3.34,3.34,0,0,1-.92,1.25c-.62.51-1.53.72-3.35,1.14L10.67,31.41c-1.82.42-2.73.63-3.51.44a3.45,3.45,0,0,1-1.75-1.1c-.51-.61-.72-1.52-1.14-3.34L.51,11.11C.09,9.29-.12,8.38.07,7.6a3.39,3.39,0,0,1,1.1-1.75c.61-.51,1.52-.72,3.34-1.14Z" />
							<path
								d="M18.1,14.09a1.33,1.33,0,0,1-.9.43,1.18,1.18,0,0,1-.62-.1,1.34,1.34,0,0,1-.37-.31l-.45-5.88a1.42,1.42,0,0,1,.47-.82,1.19,1.19,0,0,1,.71-.33,1.36,1.36,0,0,1,.41,0,1.18,1.18,0,0,1,.58.38,2.64,2.64,0,0,1,.54,1,6.49,6.49,0,0,1,.35,1.81,10.15,10.15,0,0,1,0,1.46,5,5,0,0,1-.22,1.33A2.58,2.58,0,0,1,18.1,14.09Z" />
							<path
								d="M6,5.09A5.63,5.63,0,0,1,6,2.68a2.22,2.22,0,0,1,.91-1.07,5.67,5.67,0,0,1,2.38-.43L23.42.08a5.8,5.8,0,0,1,2.42.07,2.31,2.31,0,0,1,1.07.91,5.84,5.84,0,0,1,.43,2.38l1.39,18a5.68,5.68,0,0,1-.06,2.42,2.27,2.27,0,0,1-.92,1.07,5.74,5.74,0,0,1-2.37.43L11.27,26.46a5.68,5.68,0,0,1-2.42-.06,2.34,2.34,0,0,1-1.07-.92,5.74,5.74,0,0,1-.43-2.37Zm9.67,1.48L15.51,5l-3,.23L13.76,21.8l3-1-.39-5.11a2,2,0,0,0,.73.47,3.1,3.1,0,0,0,1.28.11,3.35,3.35,0,0,0,1.82-.63,3.74,3.74,0,0,0,1.1-1.39,5.78,5.78,0,0,0,.47-1.86,11.61,11.61,0,0,0,0-2A8.4,8.4,0,0,0,21.29,8a4.36,4.36,0,0,0-.92-1.52,2.92,2.92,0,0,0-1.21-.79,3.3,3.3,0,0,0-1.37-.17,2.93,2.93,0,0,0-1.3.37A2.89,2.89,0,0,0,15.63,6.57Z"
								fill-rule="evenodd" />
						</svg>
						<span>[[Postiz Share]]</span>
					</a>
				</div>
			#end

			#if($permissions.can($module.id, "publishinggallery"))	
				<div class='auto-active-row #if($tabsection=="sharegallery") current #end'>
					<a href="$apphome/views/modules/${module.id}/editors/entitygallery/index.html?entityid=$!{entity.id}&defaultcategoryid=$!defaultcategory.getId()"
						class='btn btn-lg btn-wide ajax auto-active-link'
						data-targetdiv="tabexportcontent"
						data-oemaxlevel="1">
						<i class="bi bi-columns-gap"></i> <span>[[Publish Gallery]]</span>
					</a>
				</div>
				<div class='auto-active-row #if($tabsection=="sharecarousel") current #end'>
					<a href="$apphome/views/modules/${module.id}/editors/entitycarousel/index.html?entityid=$!{entity.id}&defaultcategoryid=$!defaultcategory.getId()"
						class='btn btn-lg btn-wide ajax auto-active-link'
						data-targetdivinner="tabexportcontent"
						data-oemaxlevel="1">
						<i class="bi bi-images"></i> <span>[[Publish Carousel]]</span>
					</a>
				</div>
			#end

			<div class='auto-active-row #if($tabsection=="sharegallery") current #end disabled' style="display: none;">
				<a href="#"
					class='btn btn-lg btn-wide ajaxX auto-active-link'
					data-targetdivinner="tabexportcontent"
					data-oemaxlevel="1">
					<i class="bi bi-columns"></i> <span>[[Folder Viewer]]</span>
				</a>
			</div>

			#if($permissions.can($module.id, "copyentity"))
				<div class='auto-active-row #if($tabsection=="copy") current #end'>
					<a class='ajax btn btn-lg btn-wide  auto-active-link '
						data-targetdivinner="tabexportcontent"
						data-oemaxlevel="1"
						data-targetcategoryid="$!defaultcategory.id"
						data-tabsection="copy"
						href="$entityexporthome/copydialog.html?entityid=$!{entity.id}&defaultcategoryid=$defaultcategory.getId()">
						<i class="bi bi-folder-plus"></i> <span>[[Copy]]</span>
					</a>
				</div>
			#end

			#if($permissions.can($module.id, "moveentity"))
				<div class='auto-active-row #if($tabsection=="move") current #end'>
					<a class='ajax btn btn-lg btn-wide auto-active-link '
						data-targetdivinner="tabexportcontent"
						data-oemaxlevel="1"
						data-tabsection="move"
						data-targetcategoryid="$!defaultcategory.id"
						href="$entityexporthome/movedialog.html?entityid=$!{entity.id}&defaultcategoryid=$defaultcategory.getId()">
						<i class="bi bi-folder-plus"></i> <span>[[Move]]</span>
					</a>
				</div>
			#end

			#if($permissions.can($module.id, "downloadall"))
				<div class='auto-active-row  #if($tabsection=="downloadzip") current #end'>
					<a class='ajax btn btn-lg btn-wide auto-active-link '
						data-targetdivinner="tabexportcontent"
						data-oemaxlevel="1"
						data-tabsection="download"
						title="[[Download All Files]]"
						href="$entityexporthome/download.html?entityid=$!{entity.id}&defaultcategoryid=$defaultcategory.getId()">
						<i class="bi bi-folder"></i> <span>[[Download Zip]]</span>
					</a>
				</div>
			#end

			#if($desktop && $permissions.can($module.id, "exportpulltoserver"))
				<div class='auto-active-row #if($tabsection=="pulllocal") current #end'>
					<a  class='btn btn-lg btn-wide ajax auto-active-link '
						data-targetdivinner="tabexportcontent"
						data-oemaxlevel="1"
						data-entityid="$!{entity.id}"
						data-defaultcategoryid="$!defaultcategory.getId()"
						data-tabsection="pulllocal"
						href="$componenthome/desktop/export/pull.html">
						<i class="bi bi-folder-symlink"></i> <span>[[Bulk Downloader]]</span>
					</a>
				</div>
			#end
		</div>

		<div id="tabexportcontent" class="entitytabcolumcontent">
			#if($tabsection=="share")
				$pages.include("$componenthome/share/entity.html?entityid=$!{entity.id}", $context)
			#elseif($tabsection=="sharegallery")
				#set($edithome = "$apphome/views/modules/${module.id}/editors/entitygallery")
				$pages.include("${edithome}/index.html?entityid=$!{entity.id}&defaultcategoryid=$!defaultcategory.getId()", $context)
			#elseif($tabsection=="sharecarousel")
				#set($edithome = "$apphome/views/modules/${module.id}/editors/entitycarousel")
				$pages.include("${edithome}/tabs/preview/tabpublishing_carousel.html?entityid=$!{entity.id}&defaultcategoryid=$defaultcategory.getId()", $context)
			#elseif($tabsection=="copy")
				$pages.include("$entityexporthome/copydialog.html?entityid=$!{entity.id}&defaultcategoryid=$defaultcategory.getId()", $context)
			#elseif($tabsection=="downloadzip")
				$pages.include("$entityexporthome/download.html?entityid=$!{entity.id}&defaultcategoryid=$defaultcategory.getId()", $context)
			#elseif($tabsection=="pulllocal")
				$pages.include("$componenthome/desktop/export/pull.html?entityid=$!{entity.id}&defaultcategoryid=$defaultcategory.getId()", $context)
			#end
		</div>
</div>
