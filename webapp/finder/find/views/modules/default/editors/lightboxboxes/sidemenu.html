<div id="lightboxessidemenu" class="overflow-y">
	#set($assetsadded = $context.getPageValue("assetsadded"))
	#set($assetsaddedto = $context.getRequestParameter("lightboxid"))

	#foreach( $box in $boxes )
		<div class="rounded lightboxnavbtn #if( $box.id != $selectedbox.getId() ) lightboxdropasset #end"
			data-entityid="$entity.id" 
			data-entitymoduleid="$entitymodule.id" 
			data-lightboxid="$box.id"
			data-lightboxtype="$lightboxtype"
			data-entitymoduleviewid="$entitymoduleviewid"
			data-oemaxlevel="1"
			data-searchhome="$searchhome"
			data-edithome="$edithome"
			data-targetdiv="$edithomeid"
		>

			<a class="ajax btn-wide #if( $box.id == $selectedbox.getId() ) active #end"
				data-targetdiv="$edithomeid"
				data-oemaxlevel="1"
				data-entityid="$!{entity.id}"
				data-entitymoduleid="$!{entitymodule.id}"
				data-lightboxtype="$lightboxtype"
				href="$edithome/index.html?lightboxid=$box.id">
				#set( $moduleicon = $box.moduleicon)
				#ifnull($moduleicon)
					#set( $moduleicon = "check-circle-fill")
				#end
				<i class="bi bi-${moduleicon}"></i>
				#set( $val = $box.getAssetCount() )
				<span id="lightbox-stat-$!{box.id}" data-filecount="$!val">
					#text($box.getName()) 
					#ifnotnull( $val )
						(${val})
					#end
				</span>
				#ifnotnull( $assetsadded )
					#if($box.id == $assetsaddedto )
						<span class="fader fade-quick emnotify">+$!{assetsadded}</span>
					#end
				#end
			</a>
			#if( $lightboxtype != "emedialightbox")
			<a href="$apphome/views/modules/$lightboxtype/editors/default/tabs/index.html?entityid=$box.id&edit=true" class="ajax lightboxbtn-edit" data-targetdiv="entitydialog" data-oemaxlevel="1" data-includeeditcontext="false">
				<i class="bi bi-eye ns"></i>
			</a>
			#end
		</div>
	#end

	<div id="entitypicker" 
		data-entityid="$entity.id" 
		data-entityid="$entity.id" 
		data-entitymoduleid="$entitymodule.id" 
		data-lightboxid=""
		data-lightboxtype="$lightboxtype"
		data-entitymoduleviewid="$entitymoduleviewid"
		data-oemaxlevel="1"
		data-searchhome="$searchhome"
		data-targetdiv="$edithomeid"
		class="rounded assetdroplightbox side-select-menu">
		
		#set($defaultfolder =  $mediaarchive.getEntityManager().loadDefaultFolder($module, $entity, $context.getUser(),true))
		#set($allassets = $mediaarchive.query("asset").exact("category",$defaultfolder).search($context) )
		
		<a href="$edithome/index.html?lightboxid=files"
			class="ajax btn-wide #ifnull($selectedbox) active #end" 
			data-targetdiv="$edithomeid" 
			data-oemaxlevel="1" 
			data-entityid="$!{entity.id}"
			data-entitymoduleid="$!{entitymodule.id}"
			data-lightboxid=""
			data-lightboxtype="$lightboxtype"
			data-entitymoduleviewid="$entitymoduleviewid"
		>
			#set( $moduleicon = $mediaarchive.getCachedData("module","asset").moduleicon)
			<i class="bi bi-${moduleicon}"></i>
			<span>
				[[Working Files]]
				($allassets.size())
			</span>
		</a>
	</div>
</div>