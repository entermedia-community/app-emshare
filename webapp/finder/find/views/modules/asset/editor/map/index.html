#if( !$catalogid )
	#set( $catalogid = $mediaarchive.getCatalogId() )
#end
#if(!$searcher)
	#set ( $searchtype = $context.getRequestParameter("searchtype") )
	#if( $searchtype )
		#set ( $searcher = $searcherManager.getSearcher($catalogid, $searchtype ) )
	#else		
		#set ( $searcher = $mediaarchive.assetSearcher )
	#end
#end
##set( $catalogid = $searcher.getCatalogId() )
##set( $searchtype= $searcher.getSearchType() )
#set ($view = "asset/geolocation")
#set ($id = $context.getRequestParameter("id"))
<div id="geolocationeditor" class="assetpanel-geomap assetpanel-editor-box h-100" style="position:relative;">
    
    #if(!$data)
    	#if( $asset )
    		#set( $data = $asset )
    	#else
    		#set ($data = $searcher.searchById($id))		
    	#end
    	$context.putPageValue("data", $data)	
    #end
    
    $context.putPageValue("searcher", $searcher)
    
    #set ( $openview = $context.getRequestParameter("openview") )
    #set ( $edit = $context.getRequestParameter("edit") )
    #if($errors)
    <span style="color:red;">[[Your entry is invalid. Please check your values and try again]].</span>
   #set($edit = "true")
   #else 
   
   #end
   	<form name="formedit$view" 
   			id="formedit$view"  
   			class="ajaxform" 
			data-targetdivinner="geolocationeditor" 
   			method="post" 
			action="$siteroot$apphome/views/modules/asset/editor/map/save.html" >
   		<input type="hidden" name="oemaxlevel" value="1"/>
   		<input type="hidden" name="saveasnew" value="false" />
   		<input type="hidden" name="save" value="true" />
   		<input type="hidden" name="catalogid" value="$!catalogid" />
   		<input type="hidden" name="searchtype" value="$searcher.getSearchType()" />
   		
   		<input type="hidden" name="view" value="$view" />
   		
   		<input type="hidden" name="assetid" value="$asset.getId()" />
   		#if( $searchtype != "asset" )
   			<input type="hidden" name="field" value="assetid" />
   			<input type="hidden" name="assetid.value" value="$asset.getId()" />
   		#end
   		<input type="hidden" name="id" value="$!data.id" />
   		$context.putPageValue("view",$view)	
   		$context.putPageValue("origURL", "$apphome/assets/${asset.sourcePath}.html")
   		<div id="geomap">
   		$pages.include("/$applicationid/components/xml/detaileditorcss.html", $context)
   		</div>
   		
   	</form>
</div>



