
#set($module = $mediaarchive.getCachedData("module", "asset"))
#set($moduleid = $module.getId())

$context.putPageValue("module", $module)
$context.putPageValue("componenthome", "$apphome/views/modules/asset/components")

$context.putPageValue("showcategoriesheader", false)
$context.putPageValue("showentitiesheader", false)


#if( !$category)
	#set($categoryid = $context.getRequestParameter("categoryid"))
	#if($categoryid)
		#set($category = $mediaarchive.getCachedData("category", $categoryid))
	#end
#end
#if( !$categoryid && $category)
	#set( $categoryid= $category.getId())
#end
$context.putPageValue("category", $category)
$context.putPageValue("categoryid", $categoryid)
#if( !$librarycol && $category )
	#set($rootcategories = $category.getParentCategories()) 
	#set( $librarycol = $mediaarchive.query("librarycollection").orgroup("rootcategory", $rootcategories).searchOne() )
#end

<div id="$!{module.getId()}resultscontainer">
<div id="assetresults"
	class="assetresults" 
	data-url="$apphome/views/modules/asset/index.html" 
	data-oemaxlevel="1"
	data-categoryid="$!categoryid"
	data-nodeID="$!categoryid">
	
	<div class="emgrid-module emgrid-box emgrid-module-asset" style=" margin:0 10px 10px;">

		<div class="emgrid-subtitle">
	  		<h3>
	     	#set($moduleicon = "entity")
	     	#if ($module.moduleicon)
	     		#set($moduleicon = $module.moduleicon)
	     	#end
	     	
			#set( $count = $hits.size())
			 
				<img src="$siteroot$apphome/theme/images/entity/${moduleicon}.svg" style="height: 26px;"> 
						
				#if( $defaultfolder )
					<div class="filtered-breadcrumb">
						
						#set($parentcategories = $defaultfolder.getParentCategories())
						
						#if(!$parentcategories.isEmpty())
							#foreach( $parent in $parentcategories)
								#if( ${foreach.count} > 1) / #end
								
								<a style="padding:0px 4px 0;" 
									href="$siteroot$apphome/views/modules/asset/viewfiles/$!{parent.id}/#dash($parent).html?hitssessionid=$!hits.getSessionId()"
									title="[[View Files]]: $parent"
									class="ajax"
									data-targetdiv="applicationcontent"
									data-oemaxlevel="5"
									data-scrolltocat="true"
									data-updateurl="true"
									data-sidebarcomponent="categories">#text($parent)</a>
					
							#end
						
							#if($count)&nbsp;<span class="count">($count)</span>#end
						#end
					</div>
				#end
			</h3>
			<div class="clearfix"></div>
		</div>
		
	
		#if($canviewupload || $candownloadcategoryzip)
		<div class="expandedentityactions">
			
			#if($category && $canviewupload)
				<div id="inlineupload">
				<a href="$apphome/components/upload/types/html5inline.html" 			
					class="btn-sm btn-blue ajax"
					data-targetdivinner="inlineupload"
					data-oemaxlevel="1"
					data-categoryid="$!category.getId()"
					title="[[Upload Media to]]: #text($category)">
				<i class="fas fa-file-upload"></i> [[Upload]]</a>
				</div>
			#end
	
	   		#if($candownloadcategoryzip)
		   		#if($category)
				<a	class="btn-sm btn-blue "
		  				title="[[Download]]: $category.getName()"
		  				href="$applink/views/modules/asset/downloads/bycategory/${category.id}/#eid($category.name).zip">
		  				<i class="fa fa-download" aria-hidden="true"></i> [[Download]]</a>
				#end
			#end
				
		</div>	
		#end
		
		<div class="clearfix"></div>
		
		
		$pages.include("$componenthome/results/index.html", $context)
		
	</div>


</div>
</div>