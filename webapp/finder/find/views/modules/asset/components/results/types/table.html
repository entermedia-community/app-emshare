
<div id="resultsdiv" class="tableresults" 
		data-hitssessionid="$hits.getSessionId()" 
		data-componenthome="$!home$!componenthome"
		data-searchhome="$!home$!componenthome/results"
		data-category="$!category.getId()"
		data-collectionid="$!librarycol.getId()" 
		data-searchtype="asset" 
		data-pagenum="$hits.getPage()" 
		data-totalpages="$hits.getTotalPages()"
		data-module="$!module">

#set( $showtoolbar = $page.isPropertyTrue("showtoolbar"))
$context.putPageValue("showtoolbar",  $showtoolbar)
$context.putPageValue("showcaption", $page.isPropertyTrue("showcaption"))
$context.putPageValue("resultstype", $context.getRequestParameter("resultstype"))

##if( $showtoolbar )
$pages.include("$componenthome/results/header.html",$context)
##end

$context.putPageValue("assetrootfolder", "/$catalogid/assets")

#if( $category )
	#set( $catid = $category.id )
#else
	#set( $catid = "index" )
#end


#if ( $hits && $hits.size() > 0 )
	
	$context.putPageValue("details",$details)
	
	   #if($userprofile) 
           #set( $details = $mediaarchive.getAssetSearcher().getDetailsForView("asset/resultstable",$userprofile) )
       #else
           #set( $details = $mediaarchive.getAssetSearcher().getDetailsForView("asset/resultstable") ) 
       #end    
	$context.putPageValue("details",$details)
	
	<div class="emselectable">	
		<div class="autoresize-inner">	
		
		#set( $viewerlink = $content.get("assetviewerlink") )
		
			<table id="main-results-table" class="table table-striped table-hover emresultstable stackedplayertable" >
					$pages.include("$componenthome/results/tableheader.html",$context)
					#set($count = 0)
					#foreach( $hit in $hits.getPageOfHits() )
						$context.putPageValue("hit", $hit)
						$context.putPageValue("assetid", $hit.id)
						$context.putPageValue("count", $count)
						$context.putPageValue("sourcepath", $hit.sourcepath)
						$pages.include("${apphome}/components/results/row.html", $context)
						#set($count = $count + 1)
					#end
			</table>
		
		</div>
	</div>	
	<div class="clearfix"></div>
	
	#if ($resultview != "map" && $resultview != "stackedgallery")
		<div class="resultsnumber">$!hits.getPageStart() - $!hits.getPageEnd()  [[of]] $!hits.total</div>
		
		#if($module.getId()=="asset")
			#set($resultsPage = "$applink/views/modules/asset/index.html?pageposition")
		#else
			#if(!$resultsPage)
				#set($resultsPage = "$componenthome/results/index.html")
			#end
			#set($resultsPage = "$resultsPage?hitssessionid=$!hits.sessionId&searchtype=$hits.getSearchType()")
			#set($resultsPage = "$resultsPage&categoryid=$!categoryid&collectionid=$!collectionid&oemaxlevel=1&resultstype=$!resultstype")
			#if($module)
				#set($resultsPage = "$resultsPage&module=$module.id")
			#end
			#set($resultsPage = "$resultsPage&pageposition")
		#end
		
		
		#if ($ismodulesearch)
			$context.putPageValue('targetdivinner',  "modulesearchexpandedmodule")
			$context.putPageValue('oemaxlevel', "3")
			
		#else
			$context.putPageValue('targetdivinner',  "applicationmaincontent")
			$context.putPageValue('oemaxlevel', "2")
		#end
		
		
		$context.putPageValue('resultsPage',  $resultsPage)
		
		$pages.include("$componenthome/results/positions.html",$context)
	#end
	

#else
<div class="info" style="margin: 20px;">[[No results found]]</div>
#end

</div>
