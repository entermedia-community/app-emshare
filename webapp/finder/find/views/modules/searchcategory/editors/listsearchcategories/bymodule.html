#if($organizedModules.size() > 0)
	<div class="searchcategorysidebar auto-active-container overflow-y">
		#if($organizedModules.size() > 1)
		<div class="mb-2 auto-active-row current">
			<a href="$entityurl" class="ajax btn btn-wide auto-active-link" data-targetdiv="modulesearchsearchcategory" data-updateurl="true" data-oemaxlevel="1">
			#set($moduleicon = "grid")
			#if ($module.moduleicon)
				#set($moduleicon = $module.moduleicon)
			#end
				<i class="bi bi-$!{moduleicon} module-icon ns"></i> <span>All #text($searchcategory) ($!{hits.size()})</span>
			</a>
		</div>
		#end
		
		#foreach($module in $organizedModules)
			#set($idhits = $organizedHits.get($module.id))
			$context.putPageValue("hits", $idhits)
			$context.putPageValue("module", $module)
			$context.putPageValue("moduleid", $module.id)
			$context.putPageValue("componenthome", "$apphome/views/modules/$module.id/components")
			#set( $favorites = $userprofile.get("favorites_"+$module.id))
			$context.putPageValue("favorites", $favorites)
			#set($moduleicon = "grid")
			#if ($module.moduleicon)
				#set($moduleicon = $module.moduleicon)
			#end
			#set($entityurl = "$!siteroot$apphome/views/modules/$!{module.id}/index.html?$!{module.id}page=1&field=searchcategory&searchcategory.value=${searchcategory.id}&operation=exact")
			#set( $entitysourcetype = $hits.getActiveFilterValues().get("entitysourcetype")) 
			#set($count = $entitysourcetype.getCount($module.id))
			
			<div class="mb-2 auto-active-row #if($organizedModules.size()  == 1) current #end">
				<a href="$entityurl" class="ajax btn btn-wide auto-active-link" data-targetdiv="modulesearchsearchcategory" data-updateurl="true" data-oemaxlevel="1">
					<i class="bi bi-$!{moduleicon} module-icon ns"></i> <span>#text($module) ($!{count})</span>
				</a>
			</div>
		#end
	</div>
#else
	<div class="emnoresults">	
		[[No modules added in this category]]
	</div>
#end