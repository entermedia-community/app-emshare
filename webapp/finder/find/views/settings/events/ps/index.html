#set( $sorted = $patheventmanager.getRunningTasksSorted() )
#if( $sorted.size() > 0 )

	<div class="tab-actions">
		<a class="btn btn-sm btn-primary ajax" 
			data-targetdiv="applicationmaincontent"
			data-oemaxlevel="4" 
			href="$siteroot$apphome/views/settings/events/ps/index.html">[[Refresh]]</a>
	</div>
	
	
<div class="emselectable">
	<table class="table table-striped table-hover emdata">
		<thead>
			<tr class="tableheader">
				<th>[[Name]]</th>
				<th>[[Path]]</th>
				<th colspan="4">[[Status]]</th>
				
			</tr>
		</thead>
		<tbody>
			#foreach( $runner in $sorted )

			#set( $event = $runner.getPathEvent() )
			<tr rowid="$event.getPage().getPath()">
				
				<td><b>$context.getText($event.getName())</b></td>
				<td> $event.getPage().getName()
				<div class="emselectabledetails">
					$!context.getText($event.getPage().getProperty("eventdescription"))
				</div> 
				#if( $event.getLastRun() )
				<div class="emselectabledetails">
					[[Last run]]:
					$context.getDateTime($event.getLastRun() )					
				</div> #end 
				</td>
				<td> #if( $event.isRunning() )
				<div class="eventrunning"><i class="fas fa-spinner fa-spin"></i> [[Running]]...</div>
				#end </td>
				<td> 
				[[Runs]]: $event.getTotalRunCount()
				#if( $event.getPeriod() > 0 )
				[[Repeats every]] $event.getFormattedPeriod()
				#end
				#if( $event.getStartingFromMidnight() )
					[[Starting:]] $event.getStartingFromFormated()
				#end
				
				 </td>
			</tr>
			#end
		</tbody>
	</table>
	<form name="showevent" target="_top" method="post" 
			action="$siteroot$apphome/views/settings/events/triggers/edit/edit.html"
			class="ajaxform"
			data-targetdiv="applicationmaincontent"
			data-oemaxlevel="4">
		<input name="eventpath" type="hidden" id="emselectedrow" />
	</form>

			

</div>
#else
[[No events in queue]]
#end 