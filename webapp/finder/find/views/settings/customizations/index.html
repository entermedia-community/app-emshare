<h3 class="settings-title">[[Customizations]]</h3>
<div class="clearfix"></div>
<div class="eml-tab-content">
  <form name="custom" action="$home$apphome/views/settings/customizations/export/customizations.zip">
    <a class="btn btn-cta" href="$home$apphome/views/settings/customizations/scan.html">
      <i class="bi bi-arrow-repeat mr-1"></i>
      [[Scan for Changes]]
    </a>
    <a class="btn btn-primary submitform" href="$home$apphome/views/settings/customizations/export/customizations.zip">
      <i class="bi bi-download mr-1"></i>
      [[Export]]
    </a>
    <a class="btn btn-primary emdialog" href="$home$apphome/views/settings/customizations/importdialog.html">
      <i class="bi bi-upload mr-1"></i>
      [[Import]]
    </a>
    <a class="btn btn-danger submitform" data-updateaction="true" href="$home$apphome/views/settings/customizations/delete.html">
      <i class="bi bi-trash mr-1"></i>
      [[Delete]]
    </a>
    <table class="table table-striped table-hover" style="margin: 15px 0; border: 1px solid var(--themed-th-hover)">
      <thead>
        <tr>
          <th style="width: 15px;text-align: center;">
            <input
              style="margin-top:5px;width:15px;transform:scale(1.25);accent-color:#444;" 
              id="checkallcustomizations"
              type="checkbox"
              checked
            />
          </th>
          <th>[[Type]]</th>
		      <th>[[Date]]</th>
          <th>[[Customization]]</th>
		      <th>[[Modules]]</th>
        </tr>
      </thead>
      <tbody>
        #set ( $changes = $mediaarchive.query("customization").all().sort("dateupdated").search($context) ) 
        #foreach ( $change in $changes )
        <tr>
          <td style="width: 15px;text-align: center;">
            <input
              style="margin-top: 5px;width: 15px;"
              name="configid"
              id="module$change.id"
              value="$change.id"
              class="customizationcheckbox"
              checked
              type="checkbox"
            />
          </td>
          <td>
            #set($type = $mediaarchive.getCachedData("customizationtype",
            $change.customizationtype)) $type
          </td>
          <td>
            #datetime( $change.getValue( "dateupdated") )
          </td>
          <td>
            <a href="$home$apphome/views/settings/modules/$module.id/info/module-setup.html?field=last_selected_module&last_selected_module.value=${module.id}">
              <label for="module$change.id" style="margin-bottom: 0">
                #text($change)
              </label>
            </a>
          </td>
          <td>
            $!change.getValues("moduleids")
          </td>
        </tr>
        #end
      </tbody>
    </table>
  </form>
</div>
