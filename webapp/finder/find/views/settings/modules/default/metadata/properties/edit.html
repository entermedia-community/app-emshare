#set( $dataroot = $content.dataroot )
<div class="tab-actions pb-3">
	<h4 class="float-left" style="margin:0;">[[Editing Field]]: <strong>$!property.name</strong></h4>
	<div style="float:right">
	#if($detail.isList() || $detail.isMultiValue())
		<a class="btn btn-xs btn-primary" href="$apphome/views/settings/lists/datamanager/list/index.html?searchtype=$detail.listId">[[Edit Values]]</a>
	#end
[[Current Field]]:
	<select id="proptomodify" 
			name="id" 
			class="form-control form-control-sm ajax"
			data-href="$siteroot${dataroot}/properties/edit.html?oemaxlevel=1&catalogid=${mediaarchive.getCatalogId()}&searchtype=$searcher.getSearchType()&" 
			data-targetdiv="modulefieldsproperties">
		<option value="" ></option>
			#foreach( $detail in $searcher.getPropertyDetails())
				<option value="$detail.id" #if($property.id == $detail.id)selected="selected"#end>$detail.text</option>
			#end
		</select>
	</div>
	<div class="clearfix"></div>
</div>
#set($viewid = $context.getRequestParameter("viewid"))

#set ( $moduleid = $context.findValue("searchtype") )		


<div id="editlayout">
#set( $origURL = $context.getRequestParameter("origURL" ) )		
		
<form id="dataeditor" name="dataeditor" method="post" 
		action="$siteroot$dataroot/properties/save.html?oemaxlevel=2"
		data-targetdiv="modulefieldsproperties"
		class="ajaxform" >
	<input name="save" type="hidden" value="true" />
	<input name="id" type="hidden" value="$!property.id" />
	<input name="catalogid" type="hidden" value="$searcher.catalogId" />
	<input name="searchtype" type="hidden" value="$searcher.getSearchType()" />
	#if($viewid)
		<input name="viewpath" type="hidden" value="${moduleid}/${viewid}"/>
	#end

<div id="edit-data" class="datamanager-editor oeinputform validate-inputs p-1">	
$context.putPageValue("searchtype", "propertydetail")
$context.putPageValue("viewid", "propertydetailedit")
$context.putPageValue("data", $property)

$context.putPageValue("searcher",$mediaarchive.getSearcher("propertydetail"))

$pages.include("$apphome/components/xml/detaileditor.html", $context)

<div id="advanced" style="display: none;">
<h4>[[Advanced Options]]</h4>
$context.putPageValue("viewid", "propertydetailadvancededit")
$pages.include("$apphome/components/xml/detaileditor.html", $context)
<div class="clearfix"></div>
</div>
</div>



<div class="" style="padding:0px 10px 10px;">
<a class="btn btn-secondary"  id="viewadvanced">[[View Advanced Options]]</a>
</div>


<div class="" style="padding:10px 10px;">

<input class="btn btn-primary right" style="margin-right: 10px;" type="submit" value="[[Save]]" />
<a class="btn btn-secondary ajax" data-targetdiv="modulefieldsproperties" style="margin-right: 10px;" href="$siteroot${dataroot}/properties/index.html?id=$!property.id&catalogid=$catalogid&searchtype=$searcher.getSearchType()&oemaxlevel=2">[[Cancel]]</a>	
<a class="btn btn-danger ajax" data-targetdiv="modulefieldsproperties" href="$siteroot${dataroot}/properties/remove.html?id=$!property.id&catalogid=$catalogid&searchtype=$searcher.getSearchType()&oemaxlevel=2">[[Delete Field]]</a>
</div>

</form>
</div>
<script>
    $('#viewadvanced').click(function(){
        if ( $(this).hasClass('show') ) {
            $('#advanced').hide();
            $(this).html('View Advanced Options');
            $(this).removeClass('show');
            
        } else {
            $('#advanced').show();
            $(this).html('Hide Advanced Options');
            $(this).addClass('show');
        }
        $(window).trigger("resize");
    });

	loadPropertyEdit = function(selectedid) {

		jQuery("#propertyEditPanel").load("$siteroot${dataroot}/properties/edit.html?id=" + selectedid + "&oemaxlevel=1&catalogid=${mediaarchive.getCatalogId()}&searchtype=${searcher.getSearchType()}");
	}

</script>