<div class="ui-widget">
<h3>[[Transcoder Settings]]</h3>

<div id="editlayout" class="mt-4 mr-4">
	#set( $origURL = $context.getRequestParameter("origURL" ) )
	#set( $categoryid = $context.getRequestParameter("categoryid" ) )
	
	#set( $viewid = "${searcher.searchType}general" )
	$context.putPageValue("viewid", $viewid)
	
	#if( $data.guid )
	<a class="btn btn-sm btn-secondary ajax" style="margin:0 10px 10px 0" 
		href='$siteroot$apphome/views/settings/modules/asset/presetconfig/edit/edit.html?id=${data.guid}'
		data-targetdiv="applicationmaincontent"
		data-oemaxlevel="4"
		data-updateurl="true">
		[[View Parameters]]
		</a>
		
	#end
	
	<form id="dataeditor-settings" 
			name="dataeditor-settings" 
			method="post" 
			action="$siteroot$content.searchhome/edit/save.html"
			class="ajaxform"
			data-targetdiv="settingslayout"
			data-oemaxlevel="3" >
		<input name="save" type="hidden" value="true" />
		<input name="id" type="hidden" value="$!data.id" />
		<input name="categoryid" type="hidden" value="$!categoryid" />
		<input name="catalogid" type="hidden" value="$searcher.catalogId" />
		<input name="searchtype" type="hidden" value="$searcher.searchType" />
		<input name="origURL"  type="hidden" value="$!origURL" />
		$pages.include("$apphome/components/xml/detaileditor.html", $context)
		
		
	<div id="controlpanel" class="ui-widget-actions"  #if($data.systemdefinedpreset == "true" )style="display:none" #end>
		<a class="btn btn-sm btn-primary submitform" href="#" ><span>[[Save]]</span></a>
		<a class="btn btn-sm btn-secondary ajax"  
				href='$siteroot$content.searchhome/index.html'
				data-targetdivinner="settingslayout"
				data-oemaxlayout="3"><span>[[Cancel]]</span></a>
		#ifnotnull($data.id)
		<a class="btn btn-sm btn-danger ajax"  
			href='$siteroot$content.searchhome/edit/delete.html?searchtype=$searcher.searchType&catalogid=$searcher.catalogId&id=$!data.id'
			data-targetdivinner="settingslayout"
			data-oemaxlevel="3">
			<span>
				[[Delete]]
			</span></a>
		#end
	</div>
	
	#if( $data.systemdefinedpreset == "true" )
	[[Cannot change system defined presets]] <a href="#" onclick='$("#controlpanel").toggle();return false;' style="text-decoration: underline; font-weight: bold;">edit anyways</a>
	#end
	
	<br>
	<div id="messagearea" style="padding:10px 0;">$!message</div>
	</form>
	#if( $savedok && $origURL )
		<a href="$origURL">[[Go Back]]</a>	
	#end
</div>

</div>

