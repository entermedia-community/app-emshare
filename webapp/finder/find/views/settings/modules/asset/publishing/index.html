#set($searcher = $searcherManager.getSearcher($catalogid, "publishdestination"))
$!context.putPageValue("searcher",$searcher)		

#set( $query = $searcher.createSearchQuery() )
#set( $null = $query.addMatches("id","*") )
$query.addSortBy("inputtype")
$query.addSortBy("name")

#set($results = $searcher.search($query))
#if($results.size() < 0)
	[[No Publishing Destinations Found]]
#else

#set ($details = $searcher.getDetailsForView("publishdestinationresultstable", $context.getUserProfile()))

	<div id="publishing" style="width:600px">
	<div class="tab-actions mb-2">
		<a class="btn btn-primary  ajax" 
			href="$siteroot$content.searchhome/edit/addnew.html"
			data-targetdivinner="publishing"
			data-oemaxlevel="1">[[Add New]]</a>
		##<a class="emdialog btn  btn-primary " href="$siteroot$content.searchhome/edit/addsmartjog.html">[[Add SmartJog]]</a>
		<div class="clearfix"></div>
	</div>
	<div class="emselectable">
	<table class="table table-striped table-hover emdata">
	<thead><tr class="tableheader">
	#foreach( $detail in $details)
	<th>$detail.getText($context)</th>
	#end
	</thead>
	<tbody>
	</tr>
	#foreach($row in $results )
	<tr rowid="$row.id" >
		#foreach( $detail in $details)
			$!context.putPageValue("detail",$detail)
			<td>		
			#set( $value = false)
			#set( $value = $row.get($detail.id) )
			#if( $value)
				$!context.putPageValue("value",$value)		
				$pages.include("$apphome/components/xml/detailreadonly.html", $context)
			#end
			</td>
		#end
	</tr>
	#end
	</tbody>
	</table>
	<form name="editview" 
			class="ajaxform" 
			action="$!{siteroot}$!{content.searchhome}/edit/edit.html"
			data-targetdivinner="publishing"
			data-oemaxlevel="1"> 
			<input type="hidden" name="id" id="emselectedrow">
	</form>
	</div>
	</div>
#end