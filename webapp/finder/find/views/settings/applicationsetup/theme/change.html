<div id="editlayout">
  #set($searcher = $mediaarchive.getSearcher("theme"))
  
  #set( $themeid = $context.getRequestParameter("themeid"))
  
  #ifnull($themeid)
    #set( $themeid = $content.get("themeid") )
  #end
  <div class="d-flex align-items-center justify-content-between mb-4">
    <h2>[[Theme Editor]]</h2>
    <div class="d-flex align-items-center">
      <a class="btn btn-secondary d-none ml-1" href="$home$apphome/views/settings/applicationsetup/theme/copy.html?themeid=$!themeid">[[Copy]]</a>
      <a class="btn btn-cta ml-1" href="$home$apphome/views/settings/lists/datamanager/list/index.html?searchtype=theme">[[Export]]</a>
      <a class="btn btn-danger ml-1" href="$home$apphome/views/settings/applicationsetup/theme/reset.html?themeid=$!themeid">[[Reset All]]</a>
      <a class="btn btn-danger d-none ml-1" href="./remove.html?themeid=$!themeid">[[Remove]]</a>
    </div>
  </div>
  
  <div class="d-flex">
    <div class="theme-sidebar">
      <a href="$home$apphome/views/settings/applicationsetup/theme/index.html" data-targetdiv="editlayout" data-updateurl="true" data-oemaxlevel="1" class="ajax btn btn-wide mb-2 #if($themeid == 'select') active #end">
        <i class="bi bi-gear ns mr-1 mb-2"></i>
        [[Select Default]]
      </a>
      <a href="$home$apphome/views/settings/applicationsetup/theme/change.html?themeid=lighttheme" data-targetdiv="editlayout" data-updateurl="true" data-oemaxlevel="1" class="ajax btn btn-wide mb-2 #if($themeid == 'lighttheme') active #end">
        <i class="bi bi-sun ns mr-1 mb-2"></i>
        [[Light Theme]]
      </a>
      <a href="$home$apphome/views/settings/applicationsetup/theme/change.html?themeid=defaulttheme" data-targetdiv="editlayout" data-updateurl="true" data-oemaxlevel="1" class="ajax btn btn-wide mb-2 #if($themeid == 'defaulttheme') active #end">
        <i class="bi bi-moon ns mr-1 mb-2"></i>
        [[Dark Theme]]
      </a>
    </div>
    <div style="flex: 1;">
      #set($data = $mediaarchive.getData("theme", $themeid))
      
      $context.putPageValue("searcher", $searcher)
      $context.putPageValue("data", $data)
      
      <!-- <link rel="stylesheet" type="text/css" href="$home$apphome/theme/${themeid}/custom.css?cache=false" /> -->
      
      #if( $data )
        #if ($message) 
        <div class="alert alert-save fader" role="alert">$message</div>
        #end
        <form id="themeeditor" method="post" action="$home$apphome/views/settings/applicationsetup/theme/save.html"  enctype="multipart/form-data">
          <input name="save" type="hidden" value="true" />
          <input name="id" type="hidden" value="$data.id" />
          <input name="themeid" type="hidden" value="$data.id" />
          
          <input name="searchtype" type="hidden" value="theme" />
          <div class="themeeditor">
            $context.putPageValue("viewid", "themeedit") 
            $pages.include("/${applicationid}/components/xml/detaileditor.html", $context)
            <div class="row mb-3">
              <div class="col-md-3 col-lg-2"></div>
              <div class="col-md-9 col-lg-9">
                <a class="advanced-theme-edit p-2 collapsed" data-toggle="collapse" href="#collapseAdvanceThemeEdit" role="button" aria-expanded="false" aria-controls="collapseAdvanceThemeEdit">
                  <i class="bi bi-palette ns mr-1"></i><i class="bi bi-palette-fill ns mr-1"></i> [[Edit Colors]]
                </a>
              </div>
            </div>
            <div class="collapse" id="collapseAdvanceThemeEdit">
              <div class="d-block py-2">
                $context.putPageValue("viewid", "themeadvancededit") 
                $pages.include("/${applicationid}/components/xml/detaileditor.html", $context)
              </div>
            </div>
          </div>
          <div class="form-submit-btns sticky">
            <button type="submit" class="btn btn-cta">
              <i class="bi bi-floppy-fill ns mr-1"></i>
              [[Save]]
            </button>
          </div>
        </form>
      #end
    </div>
  </div>
</div>