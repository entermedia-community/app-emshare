{
  "name": "generate_metadata_asset",
  "description": "Analyze the image and following metadata to generate appropriate values for the missing fields:
	#ifnotnull( $asset.name ) Current file name: $asset.name #end 
	#if( $asset.hasKeywords() )
	Existing keywords: #foreach($kw in $asset.getKeywords())#if($foreach.count > 1),#end $kw #end
	#end",
  "parameters": {
    "type": "object",
    "properties": {
      "metadata": {
        "type": "object",
        "properties": {
		  #foreach($field in $aifields)
			  #if($foreach.count>1)
			  ,
			  #end
				#if($field.isList())
					"$field.id": {
						"type": "string",
						"description": "$field.aicreationcommand",
						"enum": [
							#foreach( $option in $mediaarchive.getList($field.getListId()) )
								#if($foreach.count>1)
								,
								#end
								#jesc("$option.id|#text($option)")
							#end
						]
#*
Slower than enum, useful if list contains mixed data types
	anyOf: [
		#foreach( $option in $mediaarchive.getList($field.getListId()) )
			#if($foreach.count>1)
			,
			#end
			{
				"type": "string",
				"const": "$option.id",
				"description": "#text($option)"
			}
		#end
	]
*#
					}
				#else
					"$field.id": {
						"type": "string",
						"description": "$field.aicreationcommand"
					}
				#end
		  #end
        },
        "required": [
			#foreach($field in $aifields)
				#if($foreach.count>1)
				,
				#end
			  	"$field.id"
			#end
        ]
      }
    },
    "required": ["metadata"]
  }
}
