{
	"model": "${model}",
	"messages": [
		{
			"role": "system",
			#set($content = $fieldparams.aicreationdescription)
			#if($fieldparams.isoptional == "true")
				#set($content = "$content Return empty array if you are unsure.")
			#end
			"content": #jesc($content)
		},
		{
			"role": "user",
			$context.putPageValue("aicommandprefix", "${fieldparams.aicreationcommand}\n")
			"content": $pages.include("./commons/context_fields.json", $context)
		}
	],
	"response_format": {
		"type": "json_schema",
		"json_schema": {
			"strict": true,
			"name": "semantic_topics",
			"schema": {
				"type": "object",
				"properties": {
					"$fieldparams.getId()": {
						"type": "array",
						"items": {
							"type": "string",
							"additionalProperties": false
						}
					}
				},
				#if($fieldparams.isoptional == "false")
				"required": ["$fieldparams.getId()"],
				#end
				"additionalProperties": false
			}
		}
	}
}
