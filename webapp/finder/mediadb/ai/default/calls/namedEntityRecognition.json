{
	"model": "${model}",
	"messages": [
		{
			"role": "system",
			"content": #jesc($fieldparams.aicreationdescription)
		},
		{
			"role": "user",
			$context.putPageValue("aicommandprefix", "${fieldparams.aicreationcommand}\n")
			"content": $pages.include("./commons/context_fields.json", $context)
		}
	],
	"response_format": {
		"type": "json_schema",
		"json_schema": {
			"name": "named_entity",
			"strict": true,
			"schema": {
				"type": "object",
				"properties": {
					"categories": {
						"type": "object",
						"properties": {
							#foreach($autocreatefield in $autocreatefields)
								#if($foreach.count>1)
								,
								#end
								"$autocreatefield.getId()": {
									"type": "array",
									"description": "$autocreatefield.aiautocreateddescription",
									"items": {
										"type": "string"
									}
								}
							#end
						},
						"required": [#foreach($autocreatefield in $autocreatefields) #if($foreach.count>1), #end "$autocreatefield.getId()" #end]
					}
				},
				"required": ["categories"]
			}
		}
	}
}