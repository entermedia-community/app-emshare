{
  "type": "object",
  "description": "Populate the tables with table_name and search parameters present in the request. Choose the most relevant table from the enum. Only required if next_step is 'parseSearchParts'.",
  "properties": {
    "tables": {
      "type": "array",
      "description": "A list tables to be searched with their parameters.",
      "items": {
        "type": "object",
        "properties": {
          "table_name": {
            "type": "string",
            "description": "Name of the table if it was mentioned (by name) in the request. If no table is mentioned, use 'all'.",
            "enum": ["all"#ifnotnull($modulesenum.names), $modulesenum.names #end]
          },
          "parameters": {
            "type": "object",
            "description": "The parameters to search for in the table.",
            "properties": {
              "keywords": {
                "type": "array",
                "description": "The keywords to search for in the table, excluding the table name itself.",
                "items": { "type": "string" }
              }
            },
            "required": ["keywords"]
          },
          "foreign_table_name": {
            "type": "string",
            "description": "Name of the foreign table to join with, if applicable.",
            "enum": [$!{modulesenum.names}]
          },
          "foreign_table_parameters": {
            "type": "object",
            "description": "The parameters to search for in the foreign table.",
            "properties": {
              "keywords": {
                "type": "array",
                "description": "The keywords to search for in this foreign table, excluding the table name itself.",
                "items": { "type": "string" }
              }
            }
          }
        },
        "required": ["table_name", "parameters"]
      }
    }
  },
  "required": ["tables"]
}
