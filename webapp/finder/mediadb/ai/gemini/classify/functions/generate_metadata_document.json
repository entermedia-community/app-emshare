$context.putPageValue("aicommandprefix", "Analyze the following text that was extracted from a document and generate appropriate values for its missing metadata fields.\n\nText Content: $textcontent\n\n")

{
  "name": "generate_metadata_document",
  "description": $pages.include("../context_fields.json", $context),
  "parameters": {
    "type": "object",
    "properties": {
      "metadata": {
        "type": "object",
        "properties": {
		  #foreach($field in $aifields)
			  #if($foreach.count>1)
			  ,
			  #end
				#if($field.isList())
					"$field.id": {
						"type": "string",
						"description": "#jrender($field.aicreationcommand)",
						"enum": [
							#foreach( $option in $mediaarchive.getList($field.getListId()) )
								#if($foreach.count>1)
								,
								#end
								#jesc("$option.id|#text($option)")
							#end
						]
					}
				#else
					"$field.id": {
						"type": "string",
						"description": "#jrender($field.aicreationcommand)"
					}
				#end
		  #end
        },
        "required": [
			#foreach($field in $aifields)
				#if($foreach.count>1)
				,
				#end
			  	"$field.id"
			#end
        ]
      }
    },
    "required": ["metadata"]
  }
}
