<div class="m-0 qsresultsEntity d-flex align-items-center">
	<i class="bi bi-stars module-icon" style="font-size:0.9em;line-height:1;opacity:0.85;"></i>  
	<span class="qsresultsEntitytext">More Potential Matches</span>
</div>

#foreach($hits in $semanticentityhits)

    $context.putPageValue("module", $module)
    $context.putPageValue("moduleid", $module.id)
  
      #set($moduleicon = "grid")
      #if ($module.moduleicon)
        #set($moduleicon = $module.moduleicon)
      #end
      
    #set($entityurl = "$!siteroot$apphome/views/modules/$!{module.id}/index.html?$!{module.id}page=1&field=description&operation=freeform&description.value=$input")
    
    <div >
    
    <div class="m-0 qsresultsEntity d-flex align-items-center">
      <i class="bi bi-$moduleicon module-icon"></i>
      <span class="qsresultsEntitytext">#text($module)</span>

      #if( $module.id == "asset") ##this is safe
        #set( $count = $hits.size()) 
      #else
        #set( $count = $filter.getCount($module.id) ) 
      #end
      #ifnull($count)
        #set( $count = $hits.size()) 
      #end
      <span class="mx-1">&middot;</span> 
      <a href="$entityurl" 
        class="ajax qsresultsEntityall" 
        data-targetdiv="applicationmaincontent" 
        data-oemaxlevel="3" 
        data-updateurl="true" 
        title="[[View]] $count: #text($module)">
        <span class="qsresultsEntitytext">
          [[View All]] ($count)
        </span>
      </a>
    </div>

    
      $context.putPageValue("rendermoduleid", $module.id)
                
      $hits.setHitsPerPage(10)
      $context.putPageValue("hits", $hits)
      
      $context.putPageValue("searchresults", true)
      $context.putPageValue("searchhome", "$apphome/views/modules/${module.id}/results/default")
    
    <div class="emgridflex">  	
      <div id="galleryimg-entitiy" 
          class='emgrid #if($section != "favorites")emgridlimited#end entitiescontainer emgridquickresults' 
          style="width:100%"
          data-fixedwidth="180" 
          data-cellpadding="10"
          data-entityrenderurl="$!{siteroot}$apphome/views/modules/${module.id}/editors/default/tabs/gridcell.html"
          data-rendertype="$!rendertype">
          #foreach( $hit in $hits.getPageOfHits() )
            $context.putPageValue("hit", $hit)
            #set($rendertype = $module.modulerendertype)
            #if (!$rendertype)
                #set($rendertype = "entity")
            #end
              <div class="emgridcell emgridcellqs emgridcell-$rendertype activelistcontainer 
              #if($selectedid == $hit.getId() || $topselectedid == $hit.getId()) active #end">
                
                $pages.include("$apphome/views/modules/$!{module.id}/results/default/types/qsresult.html", $context)
                
                #set($highlight =  $hits.highlight($hit, "description", 20, true))
                #if($highlight)
                <div class="gridcellhighlight">$highlight</div>
                #end
              </div>
          #end
      </div>
    </div>
  </div>
#end

#if($semanticassethits)

  #set($searchhome = "$apphome/views/modules/asset/results/default")
	<div class="masonry-grid" 
		data-maxheight="140" 
		data-cellpadding="10"
		data-makebox="true"
		data-visibleposition="$!semanticassethits.getStartingPosition()">

		#foreach( $hit in $semanticassethits.getPageOfHits() )
			#if($count < 30)
				$context.putPageValue("hit", $hit)
		    $pages.include("${searchhome}/types/media.html", $context)
		  #end
		#end

	</div>
#end