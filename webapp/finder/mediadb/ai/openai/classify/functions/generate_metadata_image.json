{
  "name": "generate_metadata_image",
  "description": "Analyze the image and generate appropriate values for its missing metadata fields:
	#ifnotnull( $asset.name ) Current file name: #jrender($asset.name) #end
	#if( $asset.hasKeywords() )
	Existing keywords: #foreach($kw in $asset.getKeywords())#if($foreach.count > 1),#end #jrender($kw) #end
	#end",
  "parameters": {
    "type": "object",
    "properties": {
      "metadata": {
        "type": "object",
        "properties": {
		  #foreach($field in $aifields)
			  #if($foreach.count>1)
			  ,
			  #end
				#if($field.isList())
					"$field.id": {
						"type": "string",
						"description": "#jrender($field.aicreationcommand)",
						"enum": [
							#foreach( $option in $mediaarchive.getList($field.getListId()) )
								#if($foreach.count>1)
								,
								#end
								#jesc("$option.id|#text($option)")
							#end
						]
					}
				#else
					"$field.id": {
						"type": "string",
						"description": "#jrender($field.aicreationcommand)"
					}
				#end
		  #end
        },
        "required": [
			#foreach($field in $aifields)
				#if($foreach.count>1)
				,
				#end
			  	"$field.id"
			#end
        ]
      }
    },
    "required": ["metadata"]
  }
}
