#set($modules = $schema.getModules())
{
	"original_query": "",
    "request_type": {
		"description": "The type of natural language request being made ",
        "type": "string",
        "enum": [
            "search",
            "creation",
            "conversation"
        ]
    },
	"conversation_structure": {
		"type": "object",
		"description": "Details about the request. Only required if request_type is 'conversation'.",
		"friendly_response": {
			"type": "string",
			"description": "A brief response to the user's request in natural language. Only required if request_type is 'conversation'."
		 },
		"sentence_structure": {
			"description": "Ordered list of the parts of the sentence",
			"type": "array",
			"properties": {
				"parts": [ 
					"main_action": {
					    "type": "string",
					    "description": "verb"
					},
					"subject": {
					    "type": "string",
					    "description": "who or what performs it"
					},
				    "object": {
				        "type": "string",
				        "description": "what it acts on"
				    },
					"filters": {
		                 "type": "object",
		                 "description": "Column-value pairs used as filters or adjetives.",
		                 "additionalProperties": true
		             }
				]
			}
		}
	},
	"search_structure": {
	     "type": "object",
	     "description": "Ordered list of search operations. Use the minimum number of steps necessary to fulfill the request. Only required if request_type is 'search'.",
	     "search_steps": {
			 "type": "array",
			 "description": "A structured representation of the user's search request broken down into individual search steps.",
	         "properties": {	            
	             "table": {
	                 "type": "string",
	                 "description": "Name of the table if mentioned in the request, use 'Not specified' otherwise.",
					 "enum": [
					            #foreach($module in $modules)
					                        #if($foreach.count > 1),#end
					                        #jesc($module.getName())
					                #if($schema.hasChildren($module.getId()))
					                        #set($children = $schema.getChildrenOf($module.getId()))
					                    #foreach($child in $children)
					                        #if($foreach.count > 1),#end
					                        #jesc("$child.getName() in $module.getName()")
					                    #end
					                #end
					            #end
		                        ,
		                        "Not specified"
		                    ]
	             },
	             "filters": {
	                 "type": "object",
	                 "description": "Column-value pairs used as filters.",
	                 "additionalProperties": true
	             }	            
	         },
	         "required": [
	             "operation"                 
	         ]
	     }
	}, 
    "creation_structure": {
        "type": "object",
        "description": "Details about the creation request. Only required if request_type is 'creation'.",
        "properties": {
            "content_type": {
                "type": "string",
                "description": "Type of content to be created",
                "enum": [
                    "image",
                    "entity"
                ]
            },
            "attributes": {
                "type": "object",
                "description": "Attributes for the content to be created.",
                "properties": {
                    "image_name": {
                        "type": "string",
                        "description": "A short filename without extension of the image to be created. Only required if content_type is 'image'."
                    },
                    "prompt": {
                        "type": "string",
                        "description": "Prompt for the image creation. Only required if content_type is 'image'. Use the exact user prompt, don't add any additional instructions about image size, format, etc."
                    },
                    "entity_name": {
                        "type": "string",
                        "description": "Name of the entity to be created. Only required if content_type is 'entity'."
                    },
                    "module_id": {
                        "type": "string",
                        "description": "ID of the module where the entity should be saved in. Only required if content_type is 'entity'.",
                        "enum": [
                        #foreach($module in $modules)
                            #if($foreach.count > 1),#end
                            #jesc("$module.getId()|$module.getName()")
                        #end
                        ]
                    }
                }
            }
        }
    }
}